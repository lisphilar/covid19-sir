<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data preparation &mdash; CovsirPhy  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data engineering" href="02_data_engineering.html" />
    <link rel="prev" title="Installation" href="markdown/INSTALLATION.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> CovsirPhy
          </a>
              <div class="version">
                2.26.0-gamma
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">CovsirPhy introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="markdown/INSTALLATION.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data preparation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#1.-Downloading-datasets-from-recommended-data">1. Downloading datasets from recommended data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#1-1.-With-DataEngineer-class">1-1. With <code class="docutils literal notranslate"><span class="pre">DataEngineer</span></code> class</a></li>
<li class="toctree-l3"><a class="reference internal" href="#1-2.-With-DataDownloader-class">1-2. With <code class="docutils literal notranslate"><span class="pre">DataDownloader</span></code> class</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#2.-Reading-pandas.DataFrame">2. Reading <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Data-loading-in-Kaggle-Notebook">Data loading in Kaggle Notebook</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Acknowledgement">Acknowledgement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#3.-Generator-of-sample-data-with-SIR-derived-ODE-model">3. Generator of sample data with SIR-derived ODE model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#3.1-Sample-data-of-one-phase-ODE-model">3.1 Sample data of one-phase ODE model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#3.2-Sample-data-of-multi-phase-ODE-model">3.2 Sample data of multi-phase ODE model</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="02_data_engineering.html">Data engineering</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_ode.html">SIR-derived ODE models</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_phase_dependent.html">Phase-dependent SIR models</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_scenario_analysis.html">Scenario analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API references</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="covsirphy.html">covsirphy package</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="markdown/TERM.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="CODE_OF_CONDUCT.html">Contributor Covenant Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="SECURITY.html">Security policy of CovsirPhy</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Guideline of contribution</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CovsirPhy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Data preparation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/01_data_preparation.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<p><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></p>
<div class="section" id="Data-preparation">
<h1>Data preparation<a class="headerlink" href="#Data-preparation" title="Permalink to this heading"></a></h1>
<p>The first step of data science is data preparation. <code class="docutils literal notranslate"><span class="pre">covsirphy</span></code> has the following three functionality for that.</p>
<ol class="arabic simple">
<li><p>Downloading datasets from recommended data servers</p></li>
<li><p>Reading <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></p></li>
<li><p>Generator of sample data with SIR-derived ODE model</p></li>
</ol>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">covsirphy</span> <span class="k">as</span> <span class="nn">cs</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="o">!</span>pip install --upgrade <span class="s2">&quot;git+https://github.com/lisphilar/covid19-sir.git#egg=covsirphy&quot;</span> -qq
    <span class="kn">import</span> <span class="nn">covsirphy</span> <span class="k">as</span> <span class="nn">cs</span>
<span class="n">cs</span><span class="o">.</span><span class="n">__version__</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<style type='text/css'>
.datatable table.frame { margin-bottom: 0; }
.datatable table.frame thead { border-bottom: none; }
.datatable table.frame tr.coltypes td {  color: #FFFFFF;  line-height: 6px;  padding: 0 0.5em;}
.datatable .bool    { background: #DDDD99; }
.datatable .object  { background: #565656; }
.datatable .int     { background: #5D9E5D; }
.datatable .float   { background: #4040CC; }
.datatable .str     { background: #CC4040; }
.datatable .time    { background: #40CC40; }
.datatable .row_index {  background: var(--jp-border-color3);  border-right: 1px solid var(--jp-border-color0);  color: var(--jp-ui-font-color3);  font-size: 9px;}
.datatable .frame tbody td { text-align: left; }
.datatable .frame tr.coltypes .row_index {  background: var(--jp-border-color0);}
.datatable th:nth-child(2) { padding-left: 12px; }
.datatable .hellipsis {  color: var(--jp-cell-editor-border-color);}
.datatable .vellipsis {  background: var(--jp-layout-color0);  color: var(--jp-cell-editor-border-color);}
.datatable .na {  color: var(--jp-cell-editor-border-color);  font-size: 80%;}
.datatable .sp {  opacity: 0.25;}
.datatable .footer { font-size: 9px; }
.datatable .frame_dimensions {  background: var(--jp-border-color3);  border-top: 1px solid var(--jp-border-color0);  color: var(--jp-ui-font-color3);  display: inline-block;  opacity: 0.6;  padding: 1px 10px 1px 5px;}
</style></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;2.26.0-gamma&#39;
</pre></div></div>
</div>
<div class="section" id="1.-Downloading-datasets-from-recommended-data">
<h2>1. Downloading datasets from recommended data<a class="headerlink" href="#1.-Downloading-datasets-from-recommended-data" title="Permalink to this heading"></a></h2>
<p>We will download datasets from the following recommended data servers.</p>
<ul class="simple">
<li><p><strong>COVID-19 Data Hub, https://covid19datahub.io/</strong></p>
<ul>
<li><p>Guidotti, E., Ardia, D., (2020), “COVID-19 Data Hub”, Journal of Open Source Software 5(51):2376, doi: 10.21105/joss.02376.</p></li>
<li><p>The number of cases (JHU style)</p></li>
<li><p>Population values in each country/province</p></li>
<li><p><a class="reference external" href="https://github.com/OxCGRT/covid-policy-tracker">Government Response Tracker (OxCGRT)</a></p></li>
<li><p>The number of tests</p></li>
</ul>
</li>
<li><p><strong>Our World In Data, https://github.com/owid/covid-19-data/tree/master/public/data</strong></p>
<ul>
<li><p>Hasell, J., Mathieu, E., Beltekian, D. et al. A cross-country database of COVID-19 testing. Sci Data 7, 345 (2020). <a class="reference external" href="https://doi.org/10.1038/s41597-020-00688-8">https://doi.org/10.1038/s41597-020-00688-8</a></p></li>
<li><p>The number of tests</p></li>
<li><p>The number of vaccinations</p></li>
<li><p>The number of people who received vaccinations</p></li>
</ul>
</li>
<li><p><strong>COVID-19 Open Data by Google Cloud Platform, https://github.com/GoogleCloudPlatform/covid-19-open-data</strong></p>
<ul>
<li><ol class="upperalpha simple" start="15">
<li><p>Wahltinez and others (2020), COVID-19 Open-Data: curating a fine-grained, global-scale data repository for SARS-CoV-2, Work in progress, <a class="reference external" href="https://goo.gle/covid-19-open-data">https://goo.gle/covid-19-open-data</a></p></li>
</ol>
</li>
<li><p>percentage to baseline in visits</p></li>
<li><p>Note: Please refer to <a class="reference external" href="https://policies.google.com/terms">Google Terms of Service</a> in advance.</p></li>
</ul>
</li>
<li><p><strong>World Bank Open Data, https://data.worldbank.org/</strong></p>
<ul>
<li><p>World Bank Group (2020), World Bank Open Data, <a class="reference external" href="https://data.worldbank.org/">https://data.worldbank.org/</a></p></li>
<li><p>Population pyramid</p></li>
</ul>
</li>
<li><p><strong>Datasets for CovsirPhy, https://github.com/lisphilar/covid19-sir/tree/master/data</strong></p>
<ul>
<li><p>Hirokazu Takaya (2020-2022), GitHub repository, COVID-19 dataset in Japan, <a class="reference external" href="https://github.com/lisphilar/covid19-sir/tree/master/data">https://github.com/lisphilar/covid19-sir/tree/master/data</a>.</p></li>
<li><p>The number of cases in Japan (total/prefectures)</p></li>
<li><p>Metadata regarding Japan prefectures</p></li>
</ul>
</li>
</ul>
<hr class="docutils" />
<div class="line-block">
<div class="line">How to request new data loader:</div>
<div class="line">If you want to use a new dataset for your analysis, please kindly inform us using <a class="reference external" href="https://github.com/lisphilar/covid19-sir/issues/new/?template=request-new-method-of-dataloader-class.md">GitHub Issues: Request new method of DataLoader class</a>. Please read <a class="reference external" href="https://lisphilar.github.io/covid19-sir/CONTRIBUTING.html">Guideline of contribution</a> in advance.</div>
</div>
<div class="section" id="1-1.-With-DataEngineer-class">
<h3>1-1. With <code class="docutils literal notranslate"><span class="pre">DataEngineer</span></code> class<a class="headerlink" href="#1-1.-With-DataEngineer-class" title="Permalink to this heading"></a></h3>
<p>We can use <code class="docutils literal notranslate"><span class="pre">DataEngineer().download()</span></code> for data downloading from recommended data servers as the quickest way.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eng</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">DataEngineer</span><span class="p">()</span>
<span class="n">eng</span><span class="o">.</span><span class="n">download</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Retrieving COVID-19 dataset from https://github.com/lisphilar/covid19-sir/data/
Retrieving datasets from COVID-19 Data Hub https://covid19datahub.io/
Retrieving datasets from COVID-19 Open Data by Google Cloud Platform https://github.com/GoogleCloudPlatform/covid-19-open-data
Retrieving datasets from Our World In Data https://github.com/owid/covid-19-data/
</pre></div></div>
</div>
<p>We can get the all downloaded records as a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> with <code class="docutils literal notranslate"><span class="pre">DataEngineer().all()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">all_df</span> <span class="o">=</span> <span class="n">eng</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="c1"># Overview of the records</span>
<span class="n">all_df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 215999 entries, 0 to 215998
Data columns (total 33 columns):
 #   Column                               Non-Null Count   Dtype
---  ------                               --------------   -----
 0   ISO3                                 215999 non-null  category
 1   Province                             215999 non-null  category
 2   City                                 215999 non-null  category
 3   Date                                 215999 non-null  datetime64[ns]
 4   Cancel_events                        170971 non-null  object
 5   Confirmed                            196217 non-null  object
 6   Contact_tracing                      170944 non-null  object
 7   Country                              213658 non-null  string
 8   Fatal                                179720 non-null  object
 9   Gatherings_restrictions              170968 non-null  object
 10  Information_campaigns                170987 non-null  object
 11  Internal_movement_restrictions       170996 non-null  object
 12  International_movement_restrictions  171021 non-null  object
 13  Mobility_grocery_and_pharmacy        113613 non-null  object
 14  Mobility_parks                       113500 non-null  object
 15  Mobility_residential                 113290 non-null  object
 16  Mobility_retail_and_recreation       113684 non-null  object
 17  Mobility_transit_stations            114594 non-null  object
 18  Mobility_workplaces                  115023 non-null  object
 19  Population                           212709 non-null  object
 20  Product                              113276 non-null  string
 21  Recovered                            71423 non-null   object
 22  School_closing                       171015 non-null  object
 23  Stay_home_restrictions               170978 non-null  object
 24  Stringency_index                     170933 non-null  object
 25  Testing_policy                       170971 non-null  object
 26  Tests                                85182 non-null   object
 27  Transport_closing                    170987 non-null  object
 28  Vaccinated_full                      46809 non-null   object
 29  Vaccinated_once                      49340 non-null   object
 30  Vaccinations                         51992 non-null   object
 31  Vaccinations_boosters                25036 non-null   object
 32  Workplace_closing                    170975 non-null  object
dtypes: category(3), datetime64[ns](1), object(27), string(2)
memory usage: 50.3+ MB
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">DataEngineer.citations()</span></code> shows citations of the datasets.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">eng</span><span class="o">.</span><span class="n">citations</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Hirokazu Takaya (2020-2022), COVID-19 dataset in Japan, GitHub repository, https://github.com/lisphilar/covid19-sir/data/japan
Guidotti, E., Ardia, D., (2020), &#34;COVID-19 Data Hub&#34;, Journal of Open Source Software 5(51):2376, doi: 10.21105/joss.02376.
Hasell, J., Mathieu, E., Beltekian, D. et al. A cross-country database of COVID-19 testing. Sci Data 7, 345 (2020). https: //doi.org/10.1038/s41597-020-00688-8
O. Wahltinez and others (2020), COVID-19 Open-Data: curating a fine-grained, global-scale data repository for SARS-CoV-2,  Work in progress, https://goo.gle/covid-19-open-data
</pre></div></div>
</div>
<p>Note that, as default, <code class="docutils literal notranslate"><span class="pre">DataEngineer().download()</span></code> collects country-level data and save the datasets as CSV files in “input” (=``directory`` argument of <code class="docutils literal notranslate"><span class="pre">DataEngineer()</span></code>) folder of the current directory. If the last modification time of the saved CSV files is within the last 12 (=``update_interval`` argument of <code class="docutils literal notranslate"><span class="pre">DataEngineer()</span></code>) hours, the saved CSV files will be used as the database.</p>
<p>For some countries (eg. Japan), province/state/prefecture level data is available and we can download it as follows.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eng_jpn</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">DataEngineer</span><span class="p">()</span>
<span class="n">eng_jpn</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">country</span><span class="o">=</span><span class="s2">&quot;Japan&quot;</span><span class="p">)</span>
<span class="n">eng_jpn</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Retrieving COVID-19 dataset from https://github.com/lisphilar/covid19-sir/data/
Retrieving datasets from COVID-19 Data Hub https://covid19datahub.io/
Retrieving datasets from COVID-19 Open Data by Google Cloud Platform https://github.com/GoogleCloudPlatform/covid-19-open-data
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ISO3</th>
      <th>Province</th>
      <th>City</th>
      <th>Date</th>
      <th>Cancel_events</th>
      <th>Confirmed</th>
      <th>Contact_tracing</th>
      <th>Country</th>
      <th>Fatal</th>
      <th>Gatherings_restrictions</th>
      <th>...</th>
      <th>Stay_home_restrictions</th>
      <th>Stringency_index</th>
      <th>Testing_policy</th>
      <th>Tests</th>
      <th>Transport_closing</th>
      <th>Vaccinated_full</th>
      <th>Vaccinated_once</th>
      <th>Vaccinations</th>
      <th>Vaccinations_boosters</th>
      <th>Workplace_closing</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>JPN</td>
      <td>Aichi</td>
      <td>-</td>
      <td>2020-01-15</td>
      <td>0.0</td>
      <td>0</td>
      <td>1.0</td>
      <td>Japan</td>
      <td>0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>-2.78</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>JPN</td>
      <td>Aichi</td>
      <td>-</td>
      <td>2020-01-16</td>
      <td>0.0</td>
      <td>0</td>
      <td>1.0</td>
      <td>Japan</td>
      <td>0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>-2.78</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>JPN</td>
      <td>Aichi</td>
      <td>-</td>
      <td>2020-01-17</td>
      <td>0.0</td>
      <td>0</td>
      <td>2.0</td>
      <td>Japan</td>
      <td>0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>-2.78</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>JPN</td>
      <td>Aichi</td>
      <td>-</td>
      <td>2020-01-18</td>
      <td>0.0</td>
      <td>0</td>
      <td>2.0</td>
      <td>Japan</td>
      <td>0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>-2.78</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>JPN</td>
      <td>Aichi</td>
      <td>-</td>
      <td>2020-01-19</td>
      <td>0.0</td>
      <td>0</td>
      <td>2.0</td>
      <td>Japan</td>
      <td>0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>-2.78</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 26 columns</p>
</div></div>
</div>
<p>For some countries (eg. USA), city-level data is available and we can download it as follows.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eng_alabama</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">DataEngineer</span><span class="p">()</span>
<span class="n">eng_alabama</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">country</span><span class="o">=</span><span class="s2">&quot;USA&quot;</span><span class="p">,</span> <span class="n">province</span><span class="o">=</span><span class="s2">&quot;Alabama&quot;</span><span class="p">)</span>
<span class="n">eng_alabama</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Retrieving datasets from COVID-19 Data Hub https://covid19datahub.io/
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ISO3</th>
      <th>Province</th>
      <th>City</th>
      <th>Date</th>
      <th>Cancel_events</th>
      <th>Confirmed</th>
      <th>Contact_tracing</th>
      <th>Country</th>
      <th>Fatal</th>
      <th>Gatherings_restrictions</th>
      <th>...</th>
      <th>Mobility_workplaces</th>
      <th>Population</th>
      <th>Recovered</th>
      <th>School_closing</th>
      <th>Stay_home_restrictions</th>
      <th>Stringency_index</th>
      <th>Testing_policy</th>
      <th>Tests</th>
      <th>Transport_closing</th>
      <th>Workplace_closing</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>USA</td>
      <td>Alabama</td>
      <td>Autauga</td>
      <td>2020-03-24</td>
      <td>-2.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>United States</td>
      <td>0.0</td>
      <td>-4.0</td>
      <td>...</td>
      <td>&lt;NA&gt;</td>
      <td>55869.0</td>
      <td>&lt;NA&gt;</td>
      <td>3.0</td>
      <td>-2.0</td>
      <td>-68.98</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>-1.0</td>
      <td>-3.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>USA</td>
      <td>Alabama</td>
      <td>Autauga</td>
      <td>2020-03-25</td>
      <td>-2.0</td>
      <td>4.0</td>
      <td>1.0</td>
      <td>United States</td>
      <td>0.0</td>
      <td>-4.0</td>
      <td>...</td>
      <td>&lt;NA&gt;</td>
      <td>55869.0</td>
      <td>&lt;NA&gt;</td>
      <td>3.0</td>
      <td>-2.0</td>
      <td>-68.98</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>-1.0</td>
      <td>-3.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>USA</td>
      <td>Alabama</td>
      <td>Autauga</td>
      <td>2020-03-26</td>
      <td>-2.0</td>
      <td>6.0</td>
      <td>1.0</td>
      <td>United States</td>
      <td>0.0</td>
      <td>-4.0</td>
      <td>...</td>
      <td>&lt;NA&gt;</td>
      <td>55869.0</td>
      <td>&lt;NA&gt;</td>
      <td>3.0</td>
      <td>-2.0</td>
      <td>-68.98</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>-1.0</td>
      <td>-3.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>USA</td>
      <td>Alabama</td>
      <td>Autauga</td>
      <td>2020-03-27</td>
      <td>-2.0</td>
      <td>6.0</td>
      <td>1.0</td>
      <td>United States</td>
      <td>0.0</td>
      <td>-4.0</td>
      <td>...</td>
      <td>&lt;NA&gt;</td>
      <td>55869.0</td>
      <td>&lt;NA&gt;</td>
      <td>3.0</td>
      <td>-2.0</td>
      <td>-68.98</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>-1.0</td>
      <td>-3.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>USA</td>
      <td>Alabama</td>
      <td>Autauga</td>
      <td>2020-03-28</td>
      <td>2.0</td>
      <td>6.0</td>
      <td>1.0</td>
      <td>United States</td>
      <td>0.0</td>
      <td>-4.0</td>
      <td>...</td>
      <td>&lt;NA&gt;</td>
      <td>55869.0</td>
      <td>&lt;NA&gt;</td>
      <td>3.0</td>
      <td>-2.0</td>
      <td>-73.61</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>-1.0</td>
      <td>3.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 28 columns</p>
</div></div>
</div>
</div>
<div class="section" id="1-2.-With-DataDownloader-class">
<h3>1-2. With <code class="docutils literal notranslate"><span class="pre">DataDownloader</span></code> class<a class="headerlink" href="#1-2.-With-DataDownloader-class" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">DataEngineer</span></code> class is suggested because it has data cleaning methods and so on, but we can use <code class="docutils literal notranslate"><span class="pre">DataDownloader</span></code> class for data downloading.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dl</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">DataDownloader</span><span class="p">()</span>
<span class="n">dl_df</span> <span class="o">=</span> <span class="n">dl</span><span class="o">.</span><span class="n">layer</span><span class="p">(</span><span class="n">country</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">province</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Overview of the records</span>
<span class="n">dl_df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 215999 entries, 0 to 215998
Data columns (total 33 columns):
 #   Column                               Non-Null Count   Dtype
---  ------                               --------------   -----
 0   ISO3                                 215999 non-null  string
 1   Province                             215999 non-null  string
 2   City                                 215999 non-null  string
 3   Date                                 215999 non-null  datetime64[ns]
 4   Cancel_events                        170971 non-null  Float64
 5   Confirmed                            196217 non-null  Float64
 6   Contact_tracing                      170944 non-null  Float64
 7   Country                              213658 non-null  string
 8   Fatal                                179720 non-null  Float64
 9   Gatherings_restrictions              170968 non-null  Float64
 10  Information_campaigns                170987 non-null  Float64
 11  Internal_movement_restrictions       170996 non-null  Float64
 12  International_movement_restrictions  171021 non-null  Float64
 13  Mobility_grocery_and_pharmacy        113613 non-null  Float64
 14  Mobility_parks                       113500 non-null  Float64
 15  Mobility_residential                 113290 non-null  Float64
 16  Mobility_retail_and_recreation       113684 non-null  Float64
 17  Mobility_transit_stations            114594 non-null  Float64
 18  Mobility_workplaces                  115023 non-null  Float64
 19  Population                           212709 non-null  Float64
 20  Product                              113276 non-null  string
 21  Recovered                            71423 non-null   Float64
 22  School_closing                       171015 non-null  Float64
 23  Stay_home_restrictions               170978 non-null  Float64
 24  Stringency_index                     170933 non-null  Float64
 25  Testing_policy                       170971 non-null  Float64
 26  Tests                                85182 non-null   Float64
 27  Transport_closing                    170987 non-null  Float64
 28  Vaccinated_full                      46809 non-null   Float64
 29  Vaccinated_once                      49340 non-null   Float64
 30  Vaccinations                         51992 non-null   Float64
 31  Vaccinations_boosters                25036 non-null   Float64
 32  Workplace_closing                    170975 non-null  Float64
dtypes: Float64(27), datetime64[ns](1), string(5)
memory usage: 59.9 MB
</pre></div></div>
</div>
<p>Note that ISO3/Province/City columns have string data instead of categorical data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Citations</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dl</span><span class="o">.</span><span class="n">citations</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Hirokazu Takaya (2020-2022), COVID-19 dataset in Japan, GitHub repository, https://github.com/lisphilar/covid19-sir/data/japan
Guidotti, E., Ardia, D., (2020), &#34;COVID-19 Data Hub&#34;, Journal of Open Source Software 5(51):2376, doi: 10.21105/joss.02376.
Hasell, J., Mathieu, E., Beltekian, D. et al. A cross-country database of COVID-19 testing. Sci Data 7, 345 (2020). https: //doi.org/10.1038/s41597-020-00688-8
O. Wahltinez and others (2020), COVID-19 Open-Data: curating a fine-grained, global-scale data repository for SARS-CoV-2,  Work in progress, https://goo.gle/covid-19-open-data
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="2.-Reading-pandas.DataFrame">
<h2>2. Reading <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code><a class="headerlink" href="#2.-Reading-pandas.DataFrame" title="Permalink to this heading"></a></h2>
<p>We may need to use our own datasets for analysis because the dataset is not included in the recommended data servers. <code class="docutils literal notranslate"><span class="pre">DataEngineer().register()</span></code> registers new datasets of <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> format.</p>
<p>At first, we will prepare the new dataset as <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>. Just as a demonstration, we use <a class="reference external" href="https://github.com/lisphilar/covid19-sir/tree/master/data">COVID-19 dataset in Japan</a>. (Note that this is included in the recommended servers and the following is usually un-necessary.)</p>
<p>Hirokazu Takaya (2020-2022), COVID-19 dataset in Japan, GitHub repository, <a class="reference external" href="https://github.com/lisphilar/covid19-sir/data/japan">https://github.com/lisphilar/covid19-sir/data/japan</a></p>
<p>Country-level data:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c_url</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/lisphilar/covid19-sir/master/data/japan/covid_jpn_total.csv&quot;</span>
<span class="n">c_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">c_url</span><span class="p">,</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># Check columns of the pandas.DataFrame</span>
<span class="n">c_df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Location</th>
      <th>Positive</th>
      <th>Tested</th>
      <th>Symptomatic</th>
      <th>Asymptomatic</th>
      <th>Sym-unknown</th>
      <th>Hosp_require</th>
      <th>Hosp_mild</th>
      <th>Hosp_severe</th>
      <th>Hosp_unknown</th>
      <th>Hosp_waiting</th>
      <th>Discharged</th>
      <th>Fatal</th>
      <th>Vaccinated_1st</th>
      <th>Vaccinated_2nd</th>
      <th>Vaccinated_3rd</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2747</th>
      <td>2022-08-22</td>
      <td>Airport</td>
      <td>21260</td>
      <td>2338611.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>287.0</td>
      <td>NaN</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>20965</td>
      <td>8</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2748</th>
      <td>2022-08-22</td>
      <td>Returnee</td>
      <td>15</td>
      <td>829.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>15</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2749</th>
      <td>2022-08-23</td>
      <td>Domestic</td>
      <td>17303709</td>
      <td>66690431.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1929023.0</td>
      <td>NaN</td>
      <td>646</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>15234470</td>
      <td>37269</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>81082064.0</td>
    </tr>
    <tr>
      <th>2750</th>
      <td>2022-08-23</td>
      <td>Airport</td>
      <td>21301</td>
      <td>2339080.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>273.0</td>
      <td>NaN</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>21020</td>
      <td>8</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2751</th>
      <td>2022-08-23</td>
      <td>Returnee</td>
      <td>15</td>
      <td>829.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>15</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Prefecture-level data:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p_url</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/lisphilar/covid19-sir/master/data/japan/covid_jpn_prefecture.csv&quot;</span>
<span class="n">p_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">p_url</span><span class="p">,</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># Check columns of the pandas.DataFrame</span>
<span class="n">p_df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Prefecture</th>
      <th>Positive</th>
      <th>Tested</th>
      <th>Discharged</th>
      <th>Fatal</th>
      <th>Hosp_require</th>
      <th>Hosp_severe</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>41731</th>
      <td>2022-08-22</td>
      <td>Kumamoto</td>
      <td>265539</td>
      <td>461219.0</td>
      <td>229258.0</td>
      <td>486.0</td>
      <td>35795.0</td>
      <td>19.0</td>
    </tr>
    <tr>
      <th>41732</th>
      <td>2022-08-22</td>
      <td>Oita</td>
      <td>137004</td>
      <td>791519.0</td>
      <td>119303.0</td>
      <td>241.0</td>
      <td>17460.0</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>41733</th>
      <td>2022-08-22</td>
      <td>Miyazaki</td>
      <td>148304</td>
      <td>225785.0</td>
      <td>122720.0</td>
      <td>241.0</td>
      <td>24823.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>41734</th>
      <td>2022-08-22</td>
      <td>Kagoshima</td>
      <td>226894</td>
      <td>645168.0</td>
      <td>186961.0</td>
      <td>372.0</td>
      <td>36243.0</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>41735</th>
      <td>2022-08-22</td>
      <td>Okinawa</td>
      <td>448787</td>
      <td>1109641.0</td>
      <td>416684.0</td>
      <td>571.0</td>
      <td>31117.0</td>
      <td>21.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>We may create a <code class="docutils literal notranslate"><span class="pre">DataEngineer</span></code> instance, specifying the layer of location names. However, there is a discrepancy of layer names. <code class="docutils literal notranslate"><span class="pre">c_df</span></code> had “Location” layer and <code class="docutils literal notranslate"><span class="pre">p_df</span></code> had “Prefecture” layer.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">c_df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p_df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Index([&#39;Date&#39;, &#39;Location&#39;, &#39;Positive&#39;, &#39;Tested&#39;, &#39;Symptomatic&#39;, &#39;Asymptomatic&#39;,
       &#39;Sym-unknown&#39;, &#39;Hosp_require&#39;, &#39;Hosp_mild&#39;, &#39;Hosp_severe&#39;,
       &#39;Hosp_unknown&#39;, &#39;Hosp_waiting&#39;, &#39;Discharged&#39;, &#39;Fatal&#39;, &#39;Vaccinated_1st&#39;,
       &#39;Vaccinated_2nd&#39;, &#39;Vaccinated_3rd&#39;],
      dtype=&#39;object&#39;)
Index([&#39;Date&#39;, &#39;Prefecture&#39;, &#39;Positive&#39;, &#39;Tested&#39;, &#39;Discharged&#39;, &#39;Fatal&#39;,
       &#39;Hosp_require&#39;, &#39;Hosp_severe&#39;],
      dtype=&#39;object&#39;)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">c_df</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;Domestic&#39; &#39;Returnee&#39; &#39;Airport&#39;]
</pre></div></div>
</div>
<p>To make country-level dataset, calculate total values of Domestic/Returnee/Airport.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">country_df</span> <span class="o">=</span> <span class="n">c_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">country_df</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Country&quot;</span><span class="p">,</span> <span class="s2">&quot;Japan&quot;</span><span class="p">)</span>
<span class="n">country_df</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Prefecture&quot;</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span><span class="p">)</span>
<span class="n">country_df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Country</th>
      <th>Prefecture</th>
      <th>Positive</th>
      <th>Tested</th>
      <th>Symptomatic</th>
      <th>Asymptomatic</th>
      <th>Sym-unknown</th>
      <th>Hosp_require</th>
      <th>Hosp_mild</th>
      <th>Hosp_severe</th>
      <th>Hosp_unknown</th>
      <th>Hosp_waiting</th>
      <th>Discharged</th>
      <th>Fatal</th>
      <th>Vaccinated_1st</th>
      <th>Vaccinated_2nd</th>
      <th>Vaccinated_3rd</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>920</th>
      <td>2022-08-19</td>
      <td>Japan</td>
      <td>&lt;NA&gt;</td>
      <td>16423053</td>
      <td>68041949.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1843430.0</td>
      <td>0.0</td>
      <td>627</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>14443614</td>
      <td>36234</td>
      <td>5446.0</td>
      <td>0.0</td>
      <td>80870943.0</td>
    </tr>
    <tr>
      <th>921</th>
      <td>2022-08-20</td>
      <td>Japan</td>
      <td>&lt;NA&gt;</td>
      <td>16678863</td>
      <td>68429388.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1855966.0</td>
      <td>0.0</td>
      <td>616</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>14685265</td>
      <td>36517</td>
      <td>8792.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>922</th>
      <td>2022-08-21</td>
      <td>Japan</td>
      <td>&lt;NA&gt;</td>
      <td>16921653</td>
      <td>68597429.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1902563.0</td>
      <td>0.0</td>
      <td>632</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>14875073</td>
      <td>36780</td>
      <td>-199.0</td>
      <td>36745.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>923</th>
      <td>2022-08-22</td>
      <td>Japan</td>
      <td>&lt;NA&gt;</td>
      <td>17139528</td>
      <td>68716429.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1934152.0</td>
      <td>0.0</td>
      <td>640</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>15059756</td>
      <td>37008</td>
      <td>1826.0</td>
      <td>0.0</td>
      <td>81013693.0</td>
    </tr>
    <tr>
      <th>924</th>
      <td>2022-08-23</td>
      <td>Japan</td>
      <td>&lt;NA&gt;</td>
      <td>17325025</td>
      <td>69030340.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1929296.0</td>
      <td>0.0</td>
      <td>646</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>15255505</td>
      <td>37277</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>81082064.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>To make prefecture-level data, add “Country” column.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prefecture_df</span> <span class="o">=</span> <span class="n">p_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">prefecture_df</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Country&quot;</span><span class="p">,</span> <span class="s2">&quot;Japan&quot;</span><span class="p">)</span>
<span class="n">prefecture_df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Country</th>
      <th>Prefecture</th>
      <th>Positive</th>
      <th>Tested</th>
      <th>Discharged</th>
      <th>Fatal</th>
      <th>Hosp_require</th>
      <th>Hosp_severe</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>41731</th>
      <td>2022-08-22</td>
      <td>Japan</td>
      <td>Kumamoto</td>
      <td>265539</td>
      <td>461219.0</td>
      <td>229258.0</td>
      <td>486.0</td>
      <td>35795.0</td>
      <td>19.0</td>
    </tr>
    <tr>
      <th>41732</th>
      <td>2022-08-22</td>
      <td>Japan</td>
      <td>Oita</td>
      <td>137004</td>
      <td>791519.0</td>
      <td>119303.0</td>
      <td>241.0</td>
      <td>17460.0</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>41733</th>
      <td>2022-08-22</td>
      <td>Japan</td>
      <td>Miyazaki</td>
      <td>148304</td>
      <td>225785.0</td>
      <td>122720.0</td>
      <td>241.0</td>
      <td>24823.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>41734</th>
      <td>2022-08-22</td>
      <td>Japan</td>
      <td>Kagoshima</td>
      <td>226894</td>
      <td>645168.0</td>
      <td>186961.0</td>
      <td>372.0</td>
      <td>36243.0</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>41735</th>
      <td>2022-08-22</td>
      <td>Japan</td>
      <td>Okinawa</td>
      <td>448787</td>
      <td>1109641.0</td>
      <td>416684.0</td>
      <td>571.0</td>
      <td>31117.0</td>
      <td>21.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Create <code class="docutils literal notranslate"><span class="pre">DataEngineer</span></code> instance and register datasets.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set layers and specify layer name of country (which will be converted to ISO3 code for standardization)</span>
<span class="n">eng_own</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">DataEngineer</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Country&quot;</span><span class="p">,</span> <span class="s2">&quot;Prefecture&quot;</span><span class="p">],</span> <span class="n">country</span><span class="o">=</span><span class="s2">&quot;Country&quot;</span><span class="p">)</span>
<span class="c1"># Country-level data</span>
<span class="n">eng_own</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">country_df</span><span class="p">,</span> <span class="n">citations</span><span class="o">=</span><span class="s2">&quot;New country-level data&quot;</span><span class="p">,</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># Prefecture-level data</span>
<span class="n">eng_own</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">prefecture_df</span><span class="p">,</span> <span class="n">citations</span><span class="o">=</span><span class="s2">&quot;New prefecture-level data&quot;</span><span class="p">,</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># Show data</span>
<span class="n">display</span><span class="p">(</span><span class="n">eng_own</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">tail</span><span class="p">())</span>
<span class="c1"># Show citations</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">eng_own</span><span class="o">.</span><span class="n">citations</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country</th>
      <th>Prefecture</th>
      <th>Date</th>
      <th>Asymptomatic</th>
      <th>Discharged</th>
      <th>Fatal</th>
      <th>Hosp_mild</th>
      <th>Hosp_require</th>
      <th>Hosp_severe</th>
      <th>Hosp_unknown</th>
      <th>Hosp_waiting</th>
      <th>Positive</th>
      <th>Sym-unknown</th>
      <th>Symptomatic</th>
      <th>Tested</th>
      <th>Vaccinated_1st</th>
      <th>Vaccinated_2nd</th>
      <th>Vaccinated_3rd</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>42656</th>
      <td>JPN</td>
      <td>Yamanashi</td>
      <td>2022-08-18</td>
      <td>&lt;NA&gt;</td>
      <td>61006</td>
      <td>94</td>
      <td>&lt;NA&gt;</td>
      <td>8732</td>
      <td>0</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>69763</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>443620</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>42657</th>
      <td>JPN</td>
      <td>Yamanashi</td>
      <td>2022-08-19</td>
      <td>&lt;NA&gt;</td>
      <td>62124</td>
      <td>99</td>
      <td>&lt;NA&gt;</td>
      <td>9275</td>
      <td>0</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>71425</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>457423</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>42658</th>
      <td>JPN</td>
      <td>Yamanashi</td>
      <td>2022-08-20</td>
      <td>&lt;NA&gt;</td>
      <td>62124</td>
      <td>99</td>
      <td>&lt;NA&gt;</td>
      <td>9275</td>
      <td>0</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>71425</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>457423</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>42659</th>
      <td>JPN</td>
      <td>Yamanashi</td>
      <td>2022-08-21</td>
      <td>&lt;NA&gt;</td>
      <td>62124</td>
      <td>99</td>
      <td>&lt;NA&gt;</td>
      <td>9275</td>
      <td>0</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>71425</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>457423</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>42660</th>
      <td>JPN</td>
      <td>Yamanashi</td>
      <td>2022-08-22</td>
      <td>&lt;NA&gt;</td>
      <td>65700</td>
      <td>103</td>
      <td>&lt;NA&gt;</td>
      <td>9923</td>
      <td>0</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>75702</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>457423</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
New country-level data
New prefecture-level data
</pre></div></div>
</div>
<div class="section" id="Data-loading-in-Kaggle-Notebook">
<h3>Data loading in Kaggle Notebook<a class="headerlink" href="#Data-loading-in-Kaggle-Notebook" title="Permalink to this heading"></a></h3>
<p>We can use the recommended datasets in <a class="reference external" href="https://www.kaggle.com/">Kaggle</a> Notebook. The datasets are saved in “/kaggle/input/” directory. Additionally, we can use Kaggle Datasets (CSV files) with <code class="docutils literal notranslate"><span class="pre">covsirphy</span></code> in Kaggle Notebook.</p>
<div class="line-block">
<div class="line">Note:</div>
<div class="line">If you have Kaggle API, you can download Kaggle datasets to your local environment by updating and executing <a class="reference external" href="https://github.com/lisphilar/covid19-sir/blob/master/input.py">input.py</a> script. CSV files will be saved in “/kaggle/input/” directory.</div>
</div>
<div class="line-block">
<div class="line">Kaggle API:</div>
<div class="line">Move to account page of Kaggle and download “kaggle.json” by selecting “API &gt; Create New API Token” button. Copy the json file to the top directory of the local repository or “~/.kaggle”. Please refer to <a class="reference external" href="https://www.kaggle.com/docs/api">How to Use Kaggle: Public API</a> and <a class="reference external" href="https://stackoverflow.com/questions/55934733/documentation-for-kaggle-api-within-python#:~:text=Here%20are%20the%20steps%20involved%20in%20using%20the%20Kaggle%20API%20from%20Python.&amp;text=Go%20to%20your%20Kaggle%20account,json%20will%20be%20downloaded">stackoverflow: documentation for Kaggle API *within*
python?</a></div>
</div>
</div>
<div class="section" id="Acknowledgement">
<h3>Acknowledgement<a class="headerlink" href="#Acknowledgement" title="Permalink to this heading"></a></h3>
<p>In Feb2020, CovsirPhy project started in Kaggle platform with <a class="reference external" href="https://www.kaggle.com/lisphilar/covid-19-data-with-sir-model">COVID-19 data with SIR model</a> notebook using the following datasets.</p>
<ul class="simple">
<li><p>The number of cases (JHU) and linelist: <a class="reference external" href="https://www.kaggle.com/sudalairajkumar/novel-corona-virus-2019-dataset">Novel Corona Virus 2019 Dataset by SRK</a></p></li>
<li><p>Population in each country: <a class="reference external" href="https://www.kaggle.com/dgrechka/covid19-global-forecasting-locations-population">covid19 global forecasting: locations population by Dmitry A. Grechka</a></p></li>
<li><p>The number of cases in Japan: <a class="reference external" href="https://www.kaggle.com/lisphilar/covid19-dataset-in-japan">COVID-19 dataset in Japan by Lisphilar</a></p></li>
</ul>
<p>Best Regards.</p>
</div>
</div>
<div class="section" id="3.-Generator-of-sample-data-with-SIR-derived-ODE-model">
<h2>3. Generator of sample data with SIR-derived ODE model<a class="headerlink" href="#3.-Generator-of-sample-data-with-SIR-derived-ODE-model" title="Permalink to this heading"></a></h2>
<p>CovsirPhy can generate sample data with subclasses of <code class="docutils literal notranslate"><span class="pre">ODEModel</span></code> and <code class="docutils literal notranslate"><span class="pre">Dynamics</span></code> class. Refer to the followings.</p>
<div class="section" id="3.1-Sample-data-of-one-phase-ODE-model">
<h3>3.1 Sample data of one-phase ODE model<a class="headerlink" href="#3.1-Sample-data-of-one-phase-ODE-model" title="Permalink to this heading"></a></h3>
<p>Regarding ODE models, please refer to <strong>[TBC]</strong>. Here, we will create a sample data with one-phase SIR model and tau value 1440 min, the first date 01Jan2022, the last date 30Jun2022. ODE parameter values are preset.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create solver with preset</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">SIRModel</span><span class="o">.</span><span class="n">from_sample</span><span class="p">(</span><span class="n">date_range</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;01Jan2022&quot;</span><span class="p">,</span> <span class="s2">&quot;30Jun2022&quot;</span><span class="p">),</span> <span class="n">tau</span><span class="o">=</span><span class="mi">1440</span><span class="p">)</span>
<span class="c1"># Show settings</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">settings</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;date_range&#39;: (&#39;01Jan2022&#39;, &#39;30Jun2022&#39;),
 &#39;initial_dict&#39;: {&#39;Fatal or Recovered&#39;: 0,
                  &#39;Infected&#39;: 1000,
                  &#39;Susceptible&#39;: 999000},
 &#39;param_dict&#39;: {&#39;rho&#39;: 0.2, &#39;sigma&#39;: 0.075},
 &#39;tau&#39;: 1440}
</pre></div></div>
</div>
<p>Solve the ODE model with <code class="docutils literal notranslate"><span class="pre">ODEModel().solve()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">one_df</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">one_df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="n">display</span><span class="p">(</span><span class="n">one_df</span><span class="o">.</span><span class="n">tail</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Susceptible</th>
      <th>Infected</th>
      <th>Fatal or Recovered</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-01-01</th>
      <td>999000</td>
      <td>1000</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2022-01-02</th>
      <td>998787</td>
      <td>1133</td>
      <td>80</td>
    </tr>
    <tr>
      <th>2022-01-03</th>
      <td>998546</td>
      <td>1283</td>
      <td>170</td>
    </tr>
    <tr>
      <th>2022-01-04</th>
      <td>998273</td>
      <td>1454</td>
      <td>273</td>
    </tr>
    <tr>
      <th>2022-01-05</th>
      <td>997964</td>
      <td>1647</td>
      <td>389</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Susceptible</th>
      <th>Infected</th>
      <th>Fatal or Recovered</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-06-26</th>
      <td>88354</td>
      <td>750</td>
      <td>910895</td>
    </tr>
    <tr>
      <th>2022-06-27</th>
      <td>88342</td>
      <td>708</td>
      <td>910950</td>
    </tr>
    <tr>
      <th>2022-06-28</th>
      <td>88329</td>
      <td>669</td>
      <td>911002</td>
    </tr>
    <tr>
      <th>2022-06-29</th>
      <td>88318</td>
      <td>632</td>
      <td>911050</td>
    </tr>
    <tr>
      <th>2022-06-30</th>
      <td>88307</td>
      <td>596</td>
      <td>911096</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Plot the time-series data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cs</span><span class="o">.</span><span class="n">line_plot</span><span class="p">(</span><span class="n">one_df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Sample data of SIR model </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">settings</span><span class="p">()[</span><span class="s1">&#39;param_dict&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_data_preparation_42_0.png" src="_images/01_data_preparation_42_0.png" />
</div>
</div>
</div>
<div class="section" id="3.2-Sample-data-of-multi-phase-ODE-model">
<h3>3.2 Sample data of multi-phase ODE model<a class="headerlink" href="#3.2-Sample-data-of-multi-phase-ODE-model" title="Permalink to this heading"></a></h3>
<p>Regarding multi-phase ODE models, please refer to <a class="reference external" href="https://lisphilar.github.io/covid19-sir/04_phase_dependent.html">Phase-dependent SIR models</a>. Here, we will create a sample data with two-phase SIR model and tau value 1440 min, the first date 01Jan2022, the last date 30Jun2022.</p>
<div class="line-block">
<div class="line">The 0th phase: 01Jan2022 - 28Feb2022, rho=0.2, sigma=0.075 (preset)</div>
<div class="line">The 1st phase: 01Mar2022 - 30Jun2022, <strong>rho=0.4</strong>, sigma=0.075</div>
</div>
<p>We will use <code class="docutils literal notranslate"><span class="pre">Dynamics</span></code> class. At first, set the first/date of dynamics and set th 0th phase ODE parameters.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dyn</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">Dynamics</span><span class="o">.</span><span class="n">from_sample</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">cs</span><span class="o">.</span><span class="n">SIRModel</span><span class="p">,</span> <span class="n">date_range</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;01Jan2022&quot;</span><span class="p">,</span> <span class="s2">&quot;30Jun2022&quot;</span><span class="p">))</span>
<span class="c1"># Show summary</span>
<span class="n">dyn</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start</th>
      <th>End</th>
      <th>Rt</th>
      <th>rho</th>
      <th>sigma</th>
      <th>1/beta [day]</th>
      <th>1/gamma [day]</th>
    </tr>
    <tr>
      <th>Phase</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0th</th>
      <td>2022-01-01</td>
      <td>2022-06-30</td>
      <td>2.67</td>
      <td>0.2</td>
      <td>0.075</td>
      <td>5</td>
      <td>13</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Add the 1st phase with <code class="docutils literal notranslate"><span class="pre">Dynamics.register()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">setting_df</span> <span class="o">=</span> <span class="n">dyn</span><span class="o">.</span><span class="n">register</span><span class="p">()</span>
<span class="n">setting_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;01Mar2022&quot;</span><span class="p">:</span> <span class="s2">&quot;30Jun2022&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;rho&quot;</span><span class="p">,</span> <span class="s2">&quot;sigma&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.075</span><span class="p">]</span>
<span class="n">setting_df</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Susceptible</th>
      <th>Infected</th>
      <th>Recovered</th>
      <th>Fatal</th>
      <th>rho</th>
      <th>sigma</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-01-01</th>
      <td>999000</td>
      <td>1000</td>
      <td>0</td>
      <td>0</td>
      <td>0.2</td>
      <td>0.075</td>
    </tr>
    <tr>
      <th>2022-01-02</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>2022-01-03</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>2022-01-04</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>2022-01-05</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2022-06-26</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0.4</td>
      <td>0.075</td>
    </tr>
    <tr>
      <th>2022-06-27</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0.4</td>
      <td>0.075</td>
    </tr>
    <tr>
      <th>2022-06-28</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0.4</td>
      <td>0.075</td>
    </tr>
    <tr>
      <th>2022-06-29</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0.4</td>
      <td>0.075</td>
    </tr>
    <tr>
      <th>2022-06-30</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0.4</td>
      <td>0.075</td>
    </tr>
  </tbody>
</table>
<p>181 rows × 6 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dyn</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">setting_df</span><span class="p">)</span>
<span class="c1"># Show summary</span>
<span class="n">dyn</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start</th>
      <th>End</th>
      <th>Rt</th>
      <th>rho</th>
      <th>sigma</th>
      <th>1/beta [day]</th>
      <th>1/gamma [day]</th>
    </tr>
    <tr>
      <th>Phase</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0th</th>
      <td>2022-01-01</td>
      <td>2022-02-28</td>
      <td>2.67</td>
      <td>0.2</td>
      <td>0.075</td>
      <td>5</td>
      <td>13</td>
    </tr>
    <tr>
      <th>1st</th>
      <td>2022-03-01</td>
      <td>2022-06-30</td>
      <td>5.33</td>
      <td>0.4</td>
      <td>0.075</td>
      <td>2</td>
      <td>13</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Solve the ODE model with <code class="docutils literal notranslate"><span class="pre">Dynamics().simulate()</span></code> method and plot the time-series data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">two_df</span> <span class="o">=</span> <span class="n">dyn</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">model_specific</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">cs</span><span class="o">.</span><span class="n">line_plot</span><span class="p">(</span><span class="n">two_df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Sample data of two-phase SIR model&quot;</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;01Mar2022&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_data_preparation_49_0.png" src="_images/01_data_preparation_49_0.png" />
</div>
</div>
<p>When we need convert model-specific variables to model-free variables (Susceptible/Infected/Fatal/Recovered), we will set <code class="docutils literal notranslate"><span class="pre">model_specific=False</span></code> (default). Because R=”Fatal or Recovered” in SIR model, we assume that R=”Recovered” and F = 0.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">two_df</span> <span class="o">=</span> <span class="n">dyn</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">model_specific</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">cs</span><span class="o">.</span><span class="n">line_plot</span><span class="p">(</span><span class="n">two_df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Sample data of two-phase SIR model with SIRF variables&quot;</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;01Mar2022&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_data_preparation_51_0.png" src="_images/01_data_preparation_51_0.png" />
</div>
</div>
<p>Actually, observable variables are Population/Confirmed/Infected/Recovered. We can calculate Population and Confirmed as follows.</p>
<ul class="simple">
<li><p>Confirmed = Infected + Fatal + Recovered</p></li>
<li><p>Population = Susceptible + Confirmed</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">real_df</span> <span class="o">=</span> <span class="n">two_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">real_df</span><span class="p">[</span><span class="s2">&quot;Confirmed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">real_df</span><span class="p">[[</span><span class="s2">&quot;Infected&quot;</span><span class="p">,</span> <span class="s2">&quot;Fatal&quot;</span><span class="p">,</span> <span class="s2">&quot;Recovered&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">real_df</span><span class="p">[</span><span class="s2">&quot;Population&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">real_df</span><span class="p">[[</span><span class="s2">&quot;Susceptible&quot;</span><span class="p">,</span> <span class="s2">&quot;Confirmed&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">real_df</span> <span class="o">=</span> <span class="n">real_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;Population&quot;</span><span class="p">,</span> <span class="s2">&quot;Confirmed&quot;</span><span class="p">,</span> <span class="s2">&quot;Recovered&quot;</span><span class="p">,</span> <span class="s2">&quot;Fatal&quot;</span><span class="p">]]</span>
<span class="n">cs</span><span class="o">.</span><span class="n">line_plot</span><span class="p">(</span><span class="n">real_df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Sample data of two-phase SIR model with observable variables&quot;</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;01Mar2022&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_data_preparation_53_0.png" src="_images/01_data_preparation_53_0.png" />
</div>
</div>
<p>Thank you!</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="markdown/INSTALLATION.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="02_data_engineering.html" class="btn btn-neutral float-right" title="Data engineering" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2022, Hirokazu Takaya and CovsirPhy Development Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>