<!-- Refer to https://stackoverflow.com/a/50495306 -->

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data preparation &mdash; CovsirPhy  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/nbsphinx-code-cells.css" type="text/css" />
    <link rel="shortcut icon" href="https://raw.githubusercontent.com/lisphilar/covid19-sir/master/docs/logo/covsirphy_favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data engineering" href="02_data_engineering.html" />
    <link rel="prev" title="Installation" href="markdown/INSTALLATION.html" />
<script type="text/javascript">
    window.onload = function () {
        string = document.body.innerHTML;
        string = string.replace(/ package/g, '').replace(/ module/g, '');
        document.body.innerHTML = string;
    }
</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="https://raw.githubusercontent.com/lisphilar/covid19-sir/master/docs/logo/covsirphy_logo_100.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.1.dev0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">CovsirPhy introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="markdown/INSTALLATION.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data preparation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#1.-Downloading-datasets-from-recommended-data">1. Downloading datasets from recommended data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#1-1.-With-DataEngineer-class">1-1. With <code class="docutils literal notranslate"><span class="pre">DataEngineer</span></code> class</a></li>
<li class="toctree-l3"><a class="reference internal" href="#1-2.-With-DataDownloader-class">1-2. With <code class="docutils literal notranslate"><span class="pre">DataDownloader</span></code> class</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Acknowledgement">Acknowledgement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#2.-Reading-pandas.DataFrame">2. Reading <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#2-1.-Retrieve-Monkeypox-line-list">2-1. Retrieve Monkeypox line list</a></li>
<li class="toctree-l3"><a class="reference internal" href="#2-2.-Convert-line-list-to-the-number-of-cases-data">2-2. Convert line list to the number of cases data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#2-3.-Retrieve-total-population-data">2-3. Retrieve total population data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#2-4.-Register-Monkeypox-data">2-4. Register Monkeypox data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#3.-Generator-of-sample-data-with-SIR-derived-ODE-model">3. Generator of sample data with SIR-derived ODE model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#3.1-Sample-data-of-one-phase-ODE-model">3.1 Sample data of one-phase ODE model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#3.2-Sample-data-of-multi-phase-ODE-model">3.2 Sample data of multi-phase ODE model</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="02_data_engineering.html">Data engineering</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_ode.html">SIR-derived ODE models</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_phase_dependent.html">Phase-dependent SIR models</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_scenario_analysis.html">Scenario analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_prediction.html">ODE parameter prediction</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API references</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="covsirphy.html">covsirphy package</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="markdown/TERM.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="CODE_OF_CONDUCT.html">Contributor Covenant Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="SECURITY.html">Security policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contribution guideline</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CovsirPhy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Data preparation</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><a class="reference external" href="https://mybinder.org/v2/gh/lisphilar/covid19-sir/HEAD?labpath=example%2F01_data_preparation.ipynb"><img alt="Binder" src="https://mybinder.org/badge_logo.svg" /></a></p>
<div class="section" id="Data-preparation">
<h1>Data preparation<a class="headerlink" href="#Data-preparation" title="Permalink to this heading"></a></h1>
<p>The first step of data science is data preparation. <code class="docutils literal notranslate"><span class="pre">covsirphy</span></code> has the following three functionality for that.</p>
<ol class="arabic simple">
<li><p>Downloading datasets from recommended data servers</p></li>
<li><p>Reading <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></p></li>
<li><p>Generator of sample data with SIR-derived ODE model</p></li>
</ol>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">covsirphy</span> <span class="k">as</span> <span class="nn">cs</span>
<span class="n">cs</span><span class="o">.</span><span class="n">__version__</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;3.0.1.dev0&#39;
</pre></div></div>
</div>
<p>From version 2.28.0, some classes and methods output the following information using <a class="reference external" href="https://github.com/Delgan/loguru">loguru: library which aims to bring enjoyable logging in Python</a>. We can change logging level with <code class="docutils literal notranslate"><span class="pre">cs.config(level=2)</span></code> (as default).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">level=0</span></code>: errors (exceptions)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">level=1</span></code>: errors, warnings</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">level=2</span></code>: errors, warnings, info (start downloading/optimization)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">level=3</span></code>: errors, warnings, info, debug</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cs</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">logger</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="1.-Downloading-datasets-from-recommended-data">
<h2>1. Downloading datasets from recommended data<a class="headerlink" href="#1.-Downloading-datasets-from-recommended-data" title="Permalink to this heading"></a></h2>
<p>We will download datasets from the following recommended data servers.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://covid19datahub.io/">COVID-19 Data Hub</a></p>
<ul>
<li><p>Guidotti, E., Ardia, D., (2020), “COVID-19 Data Hub”, Journal of Open Source Software 5(51):2376, doi: 10.21105/joss.02376.</p></li>
<li><p>The number of cases (JHU style)</p></li>
<li><p>Population values in each country/province</p></li>
<li><p><a class="reference external" href="https://github.com/OxCGRT/covid-policy-tracker">Government Response Tracker (OxCGRT)</a></p></li>
<li><p>The number of tests</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/owid/covid-19-data/tree/master/public/data">Our World In Data</a></p>
<ul>
<li><p>Hasell, J., Mathieu, E., Beltekian, D. et al. A cross-country database of COVID-19 testing. Sci Data 7, 345 (2020). <a class="reference external" href="https://doi.org/10.1038/s41597-020-00688-8">https://doi.org/10.1038/s41597-020-00688-8</a></p></li>
<li><p>The number of tests</p></li>
<li><p>The number of vaccinations</p></li>
<li><p>The number of people who received vaccinations</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/GoogleCloudPlatform/covid-19-open-data">COVID-19 Open Data by Google Cloud Platform</a></p>
<ul>
<li><ol class="upperalpha simple" start="15">
<li><p>Wahltinez and others (2020), COVID-19 Open-Data: curating a fine-grained, global-scale data repository for SARS-CoV-2, Work in progress, <a class="reference external" href="https://goo.gle/covid-19-open-data">https://goo.gle/covid-19-open-data</a></p></li>
</ol>
</li>
<li><p>percentage to baseline in visits</p></li>
<li><p>Note: Please refer to <a class="reference external" href="https://policies.google.com/terms">Google Terms of Service</a> in advance.</p></li>
<li><p><strong>This will be removed because not updated. Refer to https://github.com/lisphilar/covid19-sir/issues/1224</strong></p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://population.un.org/wpp/">World Population Prospects 2022</a></p>
<ul>
<li><p>United Nations, Department of Economic and Social Affairs, Population Division (2022). World Population Prospects 2022, Online Edition.</p></li>
<li><p>Total population in each country</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/lisphilar/covid19-sir/tree/master/data">Datasets for CovsirPhy</a></p>
<ul>
<li><p>Hirokazu Takaya (2020-2022), GitHub repository, COVID-19 dataset in Japan, <a class="reference external" href="https://github.com/lisphilar/covid19-sir/tree/master/data">https://github.com/lisphilar/covid19-sir/tree/master/data</a></p></li>
<li><p>The number of cases in Japan (total/prefectures)</p></li>
<li><p>Metadata regarding Japan prefectures</p></li>
</ul>
</li>
</ul>
<hr class="docutils" />
<div class="line-block">
<div class="line">How to request new data loader:</div>
<div class="line">If you want to use a new dataset for your analysis, please kindly inform us using <a class="reference external" href="https://github.com/lisphilar/covid19-sir/issues/new/?template=request-new-method-of-dataloader-class.md">GitHub Issues: Request new method of DataLoader class</a>. Please read <a class="reference external" href="https://lisphilar.github.io/covid19-sir/CONTRIBUTING.html">Guideline of contribution</a> in advance.</div>
</div>
<div class="section" id="1-1.-With-DataEngineer-class">
<h3>1-1. With <code class="docutils literal notranslate"><span class="pre">DataEngineer</span></code> class<a class="headerlink" href="#1-1.-With-DataEngineer-class" title="Permalink to this heading"></a></h3>
<p>We can use <code class="docutils literal notranslate"><span class="pre">DataEngineer().download()</span></code> for data downloading from recommended data servers as the quickest way.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eng</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">DataEngineer</span><span class="p">()</span>
<span class="n">eng</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">databases</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;japan&quot;</span><span class="p">,</span> <span class="s2">&quot;covid19dh&quot;</span><span class="p">,</span> <span class="s2">&quot;owid&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2023-08-25 at 05:04:23 | <span class="ansi-bold">INFO</span> | <span class="ansi-bold">Retrieving COVID-19 dataset from https://github.com/lisphilar/covid19-sir/data/</span>
2023-08-25 at 05:04:23 | <span class="ansi-bold">INFO</span> | <span class="ansi-bold">Retrieving datasets from COVID-19 Data Hub https://covid19datahub.io/</span>
2023-08-25 at 05:04:30 | <span class="ansi-bold">INFO</span> | <span class="ansi-bold">Retrieving datasets from Our World In Data https://github.com/owid/covid-19-data/</span>
2023-08-25 at 05:04:32 | <span class="ansi-bold">INFO</span> | <span class="ansi-bold">Retrieving datasets from Our World In Data https://github.com/owid/covid-19-data/</span>
2023-08-25 at 05:04:32 | <span class="ansi-bold">INFO</span> | <span class="ansi-bold">Retrieving datasets from Our World In Data https://github.com/owid/covid-19-data/</span>
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;covsirphy.engineering.engineer.DataEngineer at 0x7f36dfd90290&gt;
</pre></div></div>
</div>
<p>We can get the all downloaded records as a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> with <code class="docutils literal notranslate"><span class="pre">DataEngineer().all()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">all_df</span> <span class="o">=</span> <span class="n">eng</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="c1"># Overview of the records</span>
<span class="n">all_df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 281012 entries, 0 to 281011
Data columns (total 27 columns):
 #   Column                               Non-Null Count   Dtype
---  ------                               --------------   -----
 0   ISO3                                 281012 non-null  category
 1   Province                             281012 non-null  category
 2   City                                 281012 non-null  category
 3   Date                                 281012 non-null  datetime64[ns]
 4   Cancel_events                        197519 non-null  Float64
 5   Confirmed                            238267 non-null  Float64
 6   Contact_tracing                      197545 non-null  Float64
 7   Country                              274182 non-null  string
 8   Fatal                                221070 non-null  Float64
 9   Gatherings_restrictions              197519 non-null  Float64
 10  Information_campaigns                197545 non-null  Float64
 11  Internal_movement_restrictions       197545 non-null  Float64
 12  International_movement_restrictions  197552 non-null  Float64
 13  Population                           273020 non-null  Float64
 14  Product                              161552 non-null  string
 15  Recovered                            73536 non-null   Float64
 16  School_closing                       197544 non-null  Float64
 17  Stay_home_restrictions               197513 non-null  Float64
 18  Stringency_index                     197508 non-null  Float64
 19  Testing_policy                       197545 non-null  Float64
 20  Tests                                90175 non-null   Float64
 21  Transport_closing                    197525 non-null  Float64
 22  Vaccinated_full                      56777 non-null   Float64
 23  Vaccinated_once                      60200 non-null   Float64
 24  Vaccinations                         63237 non-null   Float64
 25  Vaccinations_boosters                34477 non-null   Float64
 26  Workplace_closing                    197544 non-null  Float64
dtypes: Float64(21), category(3), datetime64[ns](1), string(2)
memory usage: 58.2 MB
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">DataEngineer.citations()</span></code> shows citations of the datasets.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">eng</span><span class="o">.</span><span class="n">citations</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Hirokazu Takaya (2020-2023), COVID-19 dataset in Japan, GitHub repository, https://github.com/lisphilar/covid19-sir/data/japan
Guidotti, E., Ardia, D., (2020), &#34;COVID-19 Data Hub&#34;, Journal of Open Source Software 5(51):2376, doi: 10.21105/joss.02376.
Hasell, J., Mathieu, E., Beltekian, D. et al. A cross-country database of COVID-19 testing. Sci Data 7, 345 (2020). https: //doi.org/10.1038/s41597-020-00688-8
</pre></div></div>
</div>
<p>Note that, as default, <code class="docutils literal notranslate"><span class="pre">DataEngineer().download()</span></code> collects country-level data and save the datasets as CSV files in “input” (=<code class="docutils literal notranslate"><span class="pre">directory</span></code> argument of <code class="docutils literal notranslate"><span class="pre">DataEngineer().download()</span></code>) folder of the current directory. If the last modification time of the saved CSV files is within the last 12 (=<code class="docutils literal notranslate"><span class="pre">update_interval</span></code> argument of <code class="docutils literal notranslate"><span class="pre">DataEngineer().download()</span></code>) hours, the saved CSV files will be used as the database.</p>
<p>For some countries (eg. Japan), province/state/prefecture level data is available and we can download it as follows.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eng_jpn</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">DataEngineer</span><span class="p">()</span>
<span class="n">eng_jpn</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">country</span><span class="o">=</span><span class="s2">&quot;Japan&quot;</span><span class="p">,</span> <span class="n">databases</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;japan&quot;</span><span class="p">,</span> <span class="s2">&quot;covid19dh&quot;</span><span class="p">,</span> <span class="s2">&quot;owid&quot;</span><span class="p">])</span>
<span class="n">eng_jpn</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2023-08-25 at 05:04:36 | <span class="ansi-bold">INFO</span> | <span class="ansi-bold">Retrieving COVID-19 dataset from https://github.com/lisphilar/covid19-sir/data/</span>
2023-08-25 at 05:04:37 | <span class="ansi-bold">INFO</span> | <span class="ansi-bold">Retrieving datasets from COVID-19 Data Hub https://covid19datahub.io/</span>
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ISO3</th>
      <th>Province</th>
      <th>City</th>
      <th>Date</th>
      <th>Cancel_events</th>
      <th>Confirmed</th>
      <th>Contact_tracing</th>
      <th>Country</th>
      <th>Fatal</th>
      <th>Gatherings_restrictions</th>
      <th>...</th>
      <th>Stay_home_restrictions</th>
      <th>Stringency_index</th>
      <th>Testing_policy</th>
      <th>Tests</th>
      <th>Transport_closing</th>
      <th>Vaccinated_full</th>
      <th>Vaccinated_once</th>
      <th>Vaccinations</th>
      <th>Vaccinations_boosters</th>
      <th>Workplace_closing</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>JPN</td>
      <td>Aichi</td>
      <td>-</td>
      <td>2020-03-18</td>
      <td>1.0</td>
      <td>130.0</td>
      <td>2.0</td>
      <td>Japan</td>
      <td>14.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>-40.74</td>
      <td>1.0</td>
      <td>847.0</td>
      <td>0.0</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>JPN</td>
      <td>Aichi</td>
      <td>-</td>
      <td>2020-03-19</td>
      <td>1.0</td>
      <td>134.0</td>
      <td>2.0</td>
      <td>Japan</td>
      <td>14.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>-40.74</td>
      <td>1.0</td>
      <td>847.0</td>
      <td>0.0</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>JPN</td>
      <td>Aichi</td>
      <td>-</td>
      <td>2020-03-20</td>
      <td>1.0</td>
      <td>139.0</td>
      <td>2.0</td>
      <td>Japan</td>
      <td>16.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>-40.74</td>
      <td>1.0</td>
      <td>847.0</td>
      <td>0.0</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>JPN</td>
      <td>Aichi</td>
      <td>-</td>
      <td>2020-03-21</td>
      <td>1.0</td>
      <td>141.0</td>
      <td>2.0</td>
      <td>Japan</td>
      <td>16.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>-40.74</td>
      <td>1.0</td>
      <td>847.0</td>
      <td>0.0</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>JPN</td>
      <td>Aichi</td>
      <td>-</td>
      <td>2020-03-22</td>
      <td>1.0</td>
      <td>143.0</td>
      <td>2.0</td>
      <td>Japan</td>
      <td>16.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>-40.74</td>
      <td>1.0</td>
      <td>847.0</td>
      <td>0.0</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 26 columns</p>
</div></div>
</div>
<p>For some countries (eg. USA), city-level data is available and we can download it as follows.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eng_alabama</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">DataEngineer</span><span class="p">()</span>
<span class="n">eng_alabama</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">country</span><span class="o">=</span><span class="s2">&quot;USA&quot;</span><span class="p">,</span> <span class="n">province</span><span class="o">=</span><span class="s2">&quot;Alabama&quot;</span><span class="p">,</span> <span class="n">databases</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;japan&quot;</span><span class="p">,</span> <span class="s2">&quot;covid19dh&quot;</span><span class="p">,</span> <span class="s2">&quot;owid&quot;</span><span class="p">])</span>
<span class="n">eng_alabama</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2023-08-25 at 05:04:39 | <span class="ansi-bold">INFO</span> | <span class="ansi-bold">Retrieving datasets from COVID-19 Data Hub https://covid19datahub.io/</span>
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ISO3</th>
      <th>Province</th>
      <th>City</th>
      <th>Date</th>
      <th>Cancel_events</th>
      <th>Confirmed</th>
      <th>Contact_tracing</th>
      <th>Country</th>
      <th>Fatal</th>
      <th>Gatherings_restrictions</th>
      <th>...</th>
      <th>International_movement_restrictions</th>
      <th>Population</th>
      <th>Recovered</th>
      <th>School_closing</th>
      <th>Stay_home_restrictions</th>
      <th>Stringency_index</th>
      <th>Testing_policy</th>
      <th>Tests</th>
      <th>Transport_closing</th>
      <th>Workplace_closing</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>USA</td>
      <td>Alabama</td>
      <td>Autauga</td>
      <td>2020-03-24</td>
      <td>-2.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>United States</td>
      <td>0.0</td>
      <td>-4.0</td>
      <td>...</td>
      <td>3.0</td>
      <td>55869.0</td>
      <td>&lt;NA&gt;</td>
      <td>3.0</td>
      <td>-2.0</td>
      <td>-68.98</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>-1.0</td>
      <td>-3.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>USA</td>
      <td>Alabama</td>
      <td>Autauga</td>
      <td>2020-03-25</td>
      <td>-2.0</td>
      <td>4.0</td>
      <td>1.0</td>
      <td>United States</td>
      <td>0.0</td>
      <td>-4.0</td>
      <td>...</td>
      <td>3.0</td>
      <td>55869.0</td>
      <td>&lt;NA&gt;</td>
      <td>3.0</td>
      <td>-2.0</td>
      <td>-68.98</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>-1.0</td>
      <td>-3.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>USA</td>
      <td>Alabama</td>
      <td>Autauga</td>
      <td>2020-03-26</td>
      <td>-2.0</td>
      <td>6.0</td>
      <td>1.0</td>
      <td>United States</td>
      <td>0.0</td>
      <td>-4.0</td>
      <td>...</td>
      <td>3.0</td>
      <td>55869.0</td>
      <td>&lt;NA&gt;</td>
      <td>3.0</td>
      <td>-2.0</td>
      <td>-68.98</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>-1.0</td>
      <td>-3.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>USA</td>
      <td>Alabama</td>
      <td>Autauga</td>
      <td>2020-03-27</td>
      <td>-2.0</td>
      <td>6.0</td>
      <td>1.0</td>
      <td>United States</td>
      <td>0.0</td>
      <td>-4.0</td>
      <td>...</td>
      <td>3.0</td>
      <td>55869.0</td>
      <td>&lt;NA&gt;</td>
      <td>3.0</td>
      <td>-2.0</td>
      <td>-68.98</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>-1.0</td>
      <td>-3.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>USA</td>
      <td>Alabama</td>
      <td>Autauga</td>
      <td>2020-03-28</td>
      <td>2.0</td>
      <td>6.0</td>
      <td>1.0</td>
      <td>United States</td>
      <td>0.0</td>
      <td>-4.0</td>
      <td>...</td>
      <td>3.0</td>
      <td>55869.0</td>
      <td>&lt;NA&gt;</td>
      <td>3.0</td>
      <td>-2.0</td>
      <td>-73.61</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>-1.0</td>
      <td>3.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 22 columns</p>
</div></div>
</div>
<p>Move forward to <a class="reference external" href="https://lisphilar.github.io/covid19-sir/02_data_engineering.html">Tutorial: Data engineering</a>.</p>
</div>
<div class="section" id="1-2.-With-DataDownloader-class">
<h3>1-2. With <code class="docutils literal notranslate"><span class="pre">DataDownloader</span></code> class<a class="headerlink" href="#1-2.-With-DataDownloader-class" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">DataEngineer</span></code> class is useful because it has data cleaning methods and so on (explained with <a class="reference external" href="https://lisphilar.github.io/covid19-sir/02_data_engineering.html">Tutorial: Data engineering</a>), but we can use <code class="docutils literal notranslate"><span class="pre">DataDownloader</span></code> class for data downloading.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dl</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">DataDownloader</span><span class="p">()</span>
<span class="n">dl_df</span> <span class="o">=</span> <span class="n">dl</span><span class="o">.</span><span class="n">layer</span><span class="p">(</span><span class="n">country</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">province</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">databases</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;japan&quot;</span><span class="p">,</span> <span class="s2">&quot;covid19dh&quot;</span><span class="p">,</span> <span class="s2">&quot;owid&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Overview of the records</span>
<span class="n">dl_df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 281012 entries, 0 to 281011
Data columns (total 27 columns):
 #   Column                               Non-Null Count   Dtype
---  ------                               --------------   -----
 0   ISO3                                 281012 non-null  string
 1   Province                             281012 non-null  string
 2   City                                 281012 non-null  string
 3   Date                                 281012 non-null  datetime64[ns]
 4   Cancel_events                        197519 non-null  Float64
 5   Confirmed                            238267 non-null  Float64
 6   Contact_tracing                      197545 non-null  Float64
 7   Country                              274182 non-null  string
 8   Fatal                                221070 non-null  Float64
 9   Gatherings_restrictions              197519 non-null  Float64
 10  Information_campaigns                197545 non-null  Float64
 11  Internal_movement_restrictions       197545 non-null  Float64
 12  International_movement_restrictions  197552 non-null  Float64
 13  Population                           273020 non-null  Float64
 14  Product                              161552 non-null  string
 15  Recovered                            73536 non-null   Float64
 16  School_closing                       197544 non-null  Float64
 17  Stay_home_restrictions               197513 non-null  Float64
 18  Stringency_index                     197508 non-null  Float64
 19  Testing_policy                       197545 non-null  Float64
 20  Tests                                90175 non-null   Float64
 21  Transport_closing                    197525 non-null  Float64
 22  Vaccinated_full                      56777 non-null   Float64
 23  Vaccinated_once                      60200 non-null   Float64
 24  Vaccinations                         63237 non-null   Float64
 25  Vaccinations_boosters                34477 non-null   Float64
 26  Workplace_closing                    197544 non-null  Float64
dtypes: Float64(21), datetime64[ns](1), string(5)
memory usage: 63.5 MB
</pre></div></div>
</div>
<p>Note that ISO3/Province/City columns have string data instead of categorical data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Citations</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dl</span><span class="o">.</span><span class="n">citations</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Hirokazu Takaya (2020-2023), COVID-19 dataset in Japan, GitHub repository, https://github.com/lisphilar/covid19-sir/data/japan
Guidotti, E., Ardia, D., (2020), &#34;COVID-19 Data Hub&#34;, Journal of Open Source Software 5(51):2376, doi: 10.21105/joss.02376.
Hasell, J., Mathieu, E., Beltekian, D. et al. A cross-country database of COVID-19 testing. Sci Data 7, 345 (2020). https: //doi.org/10.1038/s41597-020-00688-8
</pre></div></div>
</div>
</div>
<div class="section" id="Acknowledgement">
<h3>Acknowledgement<a class="headerlink" href="#Acknowledgement" title="Permalink to this heading"></a></h3>
<p>In Feb2020, CovsirPhy project started in <a class="reference external" href="https://www.kaggle.com/">Kaggle platform</a> with <a class="reference external" href="https://www.kaggle.com/lisphilar/covid-19-data-with-sir-model">COVID-19 data with SIR model</a> notebook by Hirokazu Takaya helped by Kagglers using the following datasets.</p>
<ul class="simple">
<li><p>The number of cases (JHU) and linelist: <a class="reference external" href="https://www.kaggle.com/sudalairajkumar/novel-corona-virus-2019-dataset">Novel Corona Virus 2019 Dataset by SRK</a></p></li>
<li><p>Population in each country: <a class="reference external" href="https://www.kaggle.com/dgrechka/covid19-global-forecasting-locations-population">covid19 global forecasting: locations population by Dmitry A. Grechka</a></p></li>
<li><p>The number of cases in Japan: <a class="reference external" href="https://www.kaggle.com/lisphilar/covid19-dataset-in-japan">COVID-19 dataset in Japan by Lisphilar</a></p></li>
</ul>
<p>The current version of <code class="docutils literal notranslate"><span class="pre">covsirphy</span></code> does not have interfaces to use the datasets in Kaggle because they are not updated at this time. However, we could not have done CovsirPhy project without their supports. Thank you!!</p>
</div>
</div>
<div class="section" id="2.-Reading-pandas.DataFrame">
<h2>2. Reading <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code><a class="headerlink" href="#2.-Reading-pandas.DataFrame" title="Permalink to this heading"></a></h2>
<p>We may need to use our own datasets for analysis because the dataset is not included in the recommended data servers. <code class="docutils literal notranslate"><span class="pre">DataEngineer().register()</span></code> registers new datasets of <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> format.</p>
<div class="section" id="2-1.-Retrieve-Monkeypox-line-list">
<h3>2-1. Retrieve Monkeypox line list<a class="headerlink" href="#2-1.-Retrieve-Monkeypox-line-list" title="Permalink to this heading"></a></h3>
<p>At first, we will prepare the new dataset as <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>. We will use <a class="reference external" href="https://github.com/globaldothealth/monkeypox">Global.health Monkeypox under CC BY 4.0 license</a>, line list data regarding Monkeypox 2022, just for demonstration.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">today</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
<span class="n">mp_cite</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Global.health Monkeypox (accessed on </span><span class="si">{</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">):</span><span class="se">\n</span><span class="s2">&quot;</span> \
    <span class="s2">&quot;Kraemer, Tegally, Pigott, Dasgupta, Sheldon, Wilkinson, Schultheiss, et al. &quot;</span> \
    <span class="s2">&quot;Tracking the 2022 Monkeypox Outbreak with Epidemiological Data in Real-Time. &quot;</span> \
    <span class="s2">&quot;The Lancet Infectious Diseases. https://doi.org/10.1016/S1473-3099(22)00359-0.</span><span class="se">\n</span><span class="s2">&quot;</span> \
    <span class="s2">&quot;European Centre for Disease Prevention and Control/WHO Regional Office for Europe.&quot;</span> \
    <span class="sa">f</span><span class="s2">&quot; Monkeypox, Joint Epidemiological overview, </span><span class="si">{</span><span class="n">today</span><span class="o">.</span><span class="n">day</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">today</span><span class="o">.</span><span class="n">month</span><span class="si">}</span><span class="s2">, 2022&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mp_cite</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Global.health Monkeypox (accessed on 2023-08-25):
Kraemer, Tegally, Pigott, Dasgupta, Sheldon, Wilkinson, Schultheiss, et al. Tracking the 2022 Monkeypox Outbreak with Epidemiological Data in Real-Time. The Lancet Infectious Diseases. https://doi.org/10.1016/S1473-3099(22)00359-0.
European Centre for Disease Prevention and Control/WHO Regional Office for Europe. Monkeypox, Joint Epidemiological overview, 25 8, 2022
</pre></div></div>
</div>
<p>Retrieve CSV file with <code class="docutils literal notranslate"><span class="pre">pandas.read_csv()</span></code>, using <a class="reference external" href="https://arrow.apache.org/docs/python/index.html">Pyarrow</a> as the engine.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Deprecated: Final line list from Global.health, as of 2022-09-22</span>
<span class="n">raw_url</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/globaldothealth/monkeypox/9035dfb1303c05c380f86a3c1e00f81a1cc4046b/latest_deprecated.csv&quot;</span>
<span class="n">raw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">raw_url</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;pyarrow&quot;</span><span class="p">)</span>
<span class="n">raw</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 69595 entries, 0 to 69594
Data columns (total 36 columns):
 #   Column                   Non-Null Count  Dtype
---  ------                   --------------  -----
 0   ID                       69595 non-null  object
 1   Status                   69595 non-null  object
 2   Location                 69595 non-null  object
 3   City                     69595 non-null  object
 4   Country                  69595 non-null  object
 5   Country_ISO3             69595 non-null  object
 6   Age                      69595 non-null  object
 7   Gender                   69595 non-null  object
 8   Date_onset               77 non-null     object
 9   Date_confirmation        69595 non-null  object
 10  Symptoms                 69595 non-null  object
 11  Hospitalised (Y/N/NA)    69595 non-null  object
 12  Date_hospitalisation     35 non-null     object
 13  Isolated (Y/N/NA)        69595 non-null  object
 14  Date_isolation           16 non-null     object
 15  Outcome                  69595 non-null  object
 16  Contact_comment          69595 non-null  object
 17  Contact_ID               27 non-null     float64
 18  Contact_location         69595 non-null  object
 19  Travel_history (Y/N/NA)  69595 non-null  object
 20  Travel_history_entry     69595 non-null  object
 21  Travel_history_start     69595 non-null  object
 22  Travel_history_location  69595 non-null  object
 23  Travel_history_country   69595 non-null  object
 24  Genomics_Metadata        69595 non-null  object
 25  Confirmation_method      69595 non-null  object
 26  Source                   69595 non-null  object
 27  Source_II                69595 non-null  object
 28  Source_III               69595 non-null  object
 29  Source_IV                69595 non-null  object
 30  Source_V                 0 non-null      object
 31  Source_VI                0 non-null      object
 32  Source_VII               0 non-null      object
 33  Date_entry               69595 non-null  object
 34  Date_death               83 non-null     object
 35  Date_last_modified       69595 non-null  object
dtypes: float64(1), object(35)
memory usage: 19.1+ MB
</pre></div></div>
</div>
<p>Review the data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">raw</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Status</th>
      <th>Location</th>
      <th>City</th>
      <th>Country</th>
      <th>Country_ISO3</th>
      <th>Age</th>
      <th>Gender</th>
      <th>Date_onset</th>
      <th>Date_confirmation</th>
      <th>...</th>
      <th>Source</th>
      <th>Source_II</th>
      <th>Source_III</th>
      <th>Source_IV</th>
      <th>Source_V</th>
      <th>Source_VI</th>
      <th>Source_VII</th>
      <th>Date_entry</th>
      <th>Date_death</th>
      <th>Date_last_modified</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>N1</td>
      <td>confirmed</td>
      <td>Guy's and St Thomas Hospital London</td>
      <td>London</td>
      <td>England</td>
      <td>GBR</td>
      <td></td>
      <td></td>
      <td>2022-04-29</td>
      <td>2022-05-06</td>
      <td>...</td>
      <td>https://www.gov.uk/government/news/monkeypox-c...</td>
      <td>https://www.who.int/emergencies/disease-outbre...</td>
      <td></td>
      <td></td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>2022-05-18</td>
      <td>None</td>
      <td>2022-05-18</td>
    </tr>
    <tr>
      <th>1</th>
      <td>N2</td>
      <td>confirmed</td>
      <td>Guy's and St Thomas Hospital London</td>
      <td>London</td>
      <td>England</td>
      <td>GBR</td>
      <td></td>
      <td></td>
      <td>2022-05-05</td>
      <td>2022-05-12</td>
      <td>...</td>
      <td>https://www.gov.uk/government/news/monkeypox-c...</td>
      <td></td>
      <td></td>
      <td></td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>2022-05-18</td>
      <td>None</td>
      <td>2022-05-18</td>
    </tr>
    <tr>
      <th>2</th>
      <td>N3</td>
      <td>confirmed</td>
      <td>London</td>
      <td>London</td>
      <td>England</td>
      <td>GBR</td>
      <td></td>
      <td></td>
      <td>2022-04-30</td>
      <td>2022-05-13</td>
      <td>...</td>
      <td>https://www.gov.uk/government/news/monkeypox-c...</td>
      <td></td>
      <td></td>
      <td></td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>2022-05-18</td>
      <td>None</td>
      <td>2022-05-18</td>
    </tr>
    <tr>
      <th>3</th>
      <td>N4</td>
      <td>confirmed</td>
      <td>London</td>
      <td>London</td>
      <td>England</td>
      <td>GBR</td>
      <td></td>
      <td>male</td>
      <td>None</td>
      <td>2022-05-15</td>
      <td>...</td>
      <td>https://www.gov.uk/government/news/monkeypox-c...</td>
      <td></td>
      <td></td>
      <td></td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>2022-05-18</td>
      <td>None</td>
      <td>2022-05-18</td>
    </tr>
    <tr>
      <th>4</th>
      <td>N5</td>
      <td>confirmed</td>
      <td>London</td>
      <td>London</td>
      <td>England</td>
      <td>GBR</td>
      <td></td>
      <td>male</td>
      <td>None</td>
      <td>2022-05-15</td>
      <td>...</td>
      <td>https://www.gov.uk/government/news/monkeypox-c...</td>
      <td></td>
      <td></td>
      <td></td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>2022-05-18</td>
      <td>None</td>
      <td>2022-05-18</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 36 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pprint</span><span class="p">(</span><span class="n">raw</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">raw</span><span class="o">.</span><span class="n">Outcome</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([&#39;confirmed&#39;, &#39;discarded&#39;, &#39;suspected&#39;, &#39;omit_error&#39;], dtype=object)
array([&#39;&#39;, &#39;Recovered&#39;, &#39;Death&#39;], dtype=object)
</pre></div></div>
</div>
</div>
<div class="section" id="2-2.-Convert-line-list-to-the-number-of-cases-data">
<h3>2-2. Convert line list to the number of cases data<a class="headerlink" href="#2-2.-Convert-line-list-to-the-number-of-cases-data" title="Permalink to this heading"></a></h3>
<p>Prepare analyzable data, converting the line list to the number of cases. This step may be skipped because we have datasets with the number of cases.</p>
<p>Prepare PPT (per protocol set) data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date_cols</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;Date_onset&quot;</span><span class="p">,</span> <span class="s2">&quot;Date_confirmation&quot;</span><span class="p">,</span> <span class="s2">&quot;Date_hospitalisation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Date_isolation&quot;</span><span class="p">,</span> <span class="s2">&quot;Date_death&quot;</span><span class="p">,</span> <span class="s2">&quot;Date_last_modified&quot;</span>
<span class="p">]</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Status&quot;</span><span class="p">,</span> <span class="s2">&quot;City&quot;</span><span class="p">,</span> <span class="s2">&quot;Country_ISO3&quot;</span><span class="p">,</span> <span class="s2">&quot;Outcome&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">date_cols</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">cols</span><span class="p">]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Country_ISO3&quot;</span><span class="p">:</span> <span class="s2">&quot;ISO3&quot;</span><span class="p">})</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Status&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s2">&quot;confirmed&quot;</span><span class="p">,</span> <span class="s2">&quot;suspected&quot;</span><span class="p">])]</span>

<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">date_cols</span><span class="p">:</span>
    <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">])</span>

<span class="n">df</span><span class="p">[</span><span class="s2">&quot;Date_min&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">date_cols</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;Date_recovered&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s2">&quot;Outcome&quot;</span><span class="p">,</span> <span class="s2">&quot;Date_last_modified&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Recovered&quot;</span> <span class="k">else</span> <span class="n">pd</span><span class="o">.</span><span class="n">NaT</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;City&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;City&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s2">&quot;Unknown&quot;</span><span class="p">)</span>

<span class="n">ppt_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">ppt_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Status</th>
      <th>City</th>
      <th>ISO3</th>
      <th>Outcome</th>
      <th>Date_onset</th>
      <th>Date_confirmation</th>
      <th>Date_hospitalisation</th>
      <th>Date_isolation</th>
      <th>Date_death</th>
      <th>Date_last_modified</th>
      <th>Date_min</th>
      <th>Date_recovered</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>N1</td>
      <td>confirmed</td>
      <td>London</td>
      <td>GBR</td>
      <td></td>
      <td>2022-04-29</td>
      <td>2022-05-06</td>
      <td>2022-05-04</td>
      <td>2022-05-04</td>
      <td>NaT</td>
      <td>2022-05-18</td>
      <td>2022-04-29</td>
      <td>NaT</td>
    </tr>
    <tr>
      <th>1</th>
      <td>N2</td>
      <td>confirmed</td>
      <td>London</td>
      <td>GBR</td>
      <td></td>
      <td>2022-05-05</td>
      <td>2022-05-12</td>
      <td>2022-05-06</td>
      <td>2022-05-09</td>
      <td>NaT</td>
      <td>2022-05-18</td>
      <td>2022-05-05</td>
      <td>NaT</td>
    </tr>
    <tr>
      <th>2</th>
      <td>N3</td>
      <td>confirmed</td>
      <td>London</td>
      <td>GBR</td>
      <td></td>
      <td>2022-04-30</td>
      <td>2022-05-13</td>
      <td>NaT</td>
      <td>NaT</td>
      <td>NaT</td>
      <td>2022-05-18</td>
      <td>2022-04-30</td>
      <td>NaT</td>
    </tr>
    <tr>
      <th>3</th>
      <td>N4</td>
      <td>confirmed</td>
      <td>London</td>
      <td>GBR</td>
      <td></td>
      <td>NaT</td>
      <td>2022-05-15</td>
      <td>NaT</td>
      <td>NaT</td>
      <td>NaT</td>
      <td>2022-05-18</td>
      <td>2022-05-15</td>
      <td>NaT</td>
    </tr>
    <tr>
      <th>4</th>
      <td>N5</td>
      <td>confirmed</td>
      <td>London</td>
      <td>GBR</td>
      <td></td>
      <td>NaT</td>
      <td>2022-05-15</td>
      <td>NaT</td>
      <td>NaT</td>
      <td>NaT</td>
      <td>2022-05-18</td>
      <td>2022-05-15</td>
      <td>NaT</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Calculate daily new confirmed cases.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">ppt_df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Date_min&quot;</span><span class="p">:</span> <span class="s2">&quot;Date&quot;</span><span class="p">})</span>
<span class="n">series</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;ISO3&quot;</span><span class="p">,</span> <span class="s2">&quot;City&quot;</span><span class="p">,</span> <span class="s2">&quot;Date&quot;</span><span class="p">])[</span><span class="s2">&quot;ID&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="n">series</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Confirmed&quot;</span>
<span class="n">c_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">series</span><span class="p">)</span>
<span class="n">c_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>Confirmed</th>
    </tr>
    <tr>
      <th>ISO3</th>
      <th>City</th>
      <th>Date</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">ABW</th>
      <th rowspan="3" valign="top">Unknown</th>
      <th>2022-08-22</th>
      <td>1</td>
    </tr>
    <tr>
      <th>2022-08-29</th>
      <td>1</td>
    </tr>
    <tr>
      <th>2022-09-13</th>
      <td>1</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">AND</th>
      <th rowspan="2" valign="top">Unknown</th>
      <th>2022-07-25</th>
      <td>1</td>
    </tr>
    <tr>
      <th>2022-07-26</th>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Calculate daily new recovered cases.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">ppt_df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Date_recovered&quot;</span><span class="p">:</span> <span class="s2">&quot;Date&quot;</span><span class="p">})</span>
<span class="n">series</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;ISO3&quot;</span><span class="p">,</span> <span class="s2">&quot;City&quot;</span><span class="p">,</span> <span class="s2">&quot;Date&quot;</span><span class="p">])[</span><span class="s2">&quot;ID&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="n">series</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Recovered&quot;</span>
<span class="n">r_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">series</span><span class="p">)</span>
<span class="n">r_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>Recovered</th>
    </tr>
    <tr>
      <th>ISO3</th>
      <th>City</th>
      <th>Date</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>AUS</th>
      <th>Melbourne</th>
      <th>2022-06-30</th>
      <td>1</td>
    </tr>
    <tr>
      <th>TUR</th>
      <th>Unknown</th>
      <th>2022-08-05</th>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Calculate daily new fatal cases.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">ppt_df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Date_death&quot;</span><span class="p">:</span> <span class="s2">&quot;Date&quot;</span><span class="p">})</span>
<span class="n">series</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;ISO3&quot;</span><span class="p">,</span> <span class="s2">&quot;City&quot;</span><span class="p">,</span> <span class="s2">&quot;Date&quot;</span><span class="p">])[</span><span class="s2">&quot;ID&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="n">series</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Fatal&quot;</span>
<span class="n">f_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">series</span><span class="p">)</span>
<span class="n">f_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>Fatal</th>
    </tr>
    <tr>
      <th>ISO3</th>
      <th>City</th>
      <th>Date</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>BEL</th>
      <th>Unknown</th>
      <th>2022-08-29</th>
      <td>1</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">BRA</th>
      <th rowspan="2" valign="top">Unknown</th>
      <th>2022-07-28</th>
      <td>1</td>
    </tr>
    <tr>
      <th>2022-08-29</th>
      <td>1</td>
    </tr>
    <tr>
      <th>CAF</th>
      <th>Unknown</th>
      <th>2022-03-04</th>
      <td>2</td>
    </tr>
    <tr>
      <th>COD</th>
      <th>Unknown</th>
      <th>2022-01-16</th>
      <td>18</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Combine data (cumulative number).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">c_df</span><span class="o">.</span><span class="n">combine_first</span><span class="p">(</span><span class="n">f_df</span><span class="p">)</span><span class="o">.</span><span class="n">combine_first</span><span class="p">(</span><span class="n">r_df</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ISO3&quot;</span><span class="p">,</span> <span class="s2">&quot;City&quot;</span><span class="p">])</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ISO3&quot;</span><span class="p">,</span> <span class="s2">&quot;City&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">reorder_levels</span><span class="p">([</span><span class="s2">&quot;ISO3&quot;</span><span class="p">,</span> <span class="s2">&quot;City&quot;</span><span class="p">,</span> <span class="s2">&quot;Date&quot;</span><span class="p">])</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">all_df_city</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">all_df_city</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ISO3</th>
      <th>City</th>
      <th>Date</th>
      <th>Confirmed</th>
      <th>Fatal</th>
      <th>Recovered</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ABW</td>
      <td>Unknown</td>
      <td>2022-01-16</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ABW</td>
      <td>Unknown</td>
      <td>2022-01-17</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ABW</td>
      <td>Unknown</td>
      <td>2022-01-18</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ABW</td>
      <td>Unknown</td>
      <td>2022-01-19</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ABW</td>
      <td>Unknown</td>
      <td>2022-01-20</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>At country level (City = “-“) and city level (City != “-“):</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df2</span> <span class="o">=</span> <span class="n">all_df_city</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;ISO3&quot;</span><span class="p">,</span> <span class="s2">&quot;Date&quot;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">df2</span><span class="p">[</span><span class="s2">&quot;City&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;-&quot;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df2</span><span class="p">,</span> <span class="n">all_df_city</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;City&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">]</span>
<span class="n">all_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">convert_dtypes</span><span class="p">()</span>
<span class="n">all_df</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ISO3</th>
      <th>Date</th>
      <th>City</th>
      <th>Confirmed</th>
      <th>Fatal</th>
      <th>Recovered</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ABW</td>
      <td>2022-01-16</td>
      <td>-</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ABW</td>
      <td>2022-01-17</td>
      <td>-</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ABW</td>
      <td>2022-01-18</td>
      <td>-</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ABW</td>
      <td>2022-01-19</td>
      <td>-</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ABW</td>
      <td>2022-01-20</td>
      <td>-</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>69245</th>
      <td>ZAF</td>
      <td>2022-09-18</td>
      <td>Johannesburg</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>69246</th>
      <td>ZAF</td>
      <td>2022-09-19</td>
      <td>Johannesburg</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>69247</th>
      <td>ZAF</td>
      <td>2022-09-20</td>
      <td>Johannesburg</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>69248</th>
      <td>ZAF</td>
      <td>2022-09-21</td>
      <td>Johannesburg</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>69249</th>
      <td>ZAF</td>
      <td>2022-09-22</td>
      <td>Johannesburg</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>70500 rows × 6 columns</p>
</div></div>
</div>
<p>Check data.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gis</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">GIS</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ISO3&quot;</span><span class="p">,</span> <span class="s2">&quot;City&quot;</span><span class="p">],</span> <span class="n">country</span><span class="o">=</span><span class="s2">&quot;ISO3&quot;</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">)</span>
<span class="n">gis</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">all_df</span><span class="p">,</span> <span class="n">convert_iso3</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">variable</span> <span class="o">=</span> <span class="s2">&quot;Confirmed&quot;</span>
<span class="n">gis</span><span class="o">.</span><span class="n">choropleth</span><span class="p">(</span>
    <span class="n">variable</span><span class="o">=</span><span class="n">variable</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Choropleth map (the number of </span><span class="si">{</span><span class="n">variable</span><span class="si">}</span><span class="s2"> cases)&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2023-08-25 at 05:05:50 | <span class="ansi-bold">INFO</span> | <span class="ansi-bold">Retrieving GIS data from Natural Earth https://www.naturalearthdata.com/</span>
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_data_preparation_47_1.png" src="_images/01_data_preparation_47_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">global_df</span> <span class="o">=</span> <span class="n">gis</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">geo</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span>
<span class="n">global_df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
<span class="n">cs</span><span class="o">.</span><span class="n">line_plot</span><span class="p">(</span><span class="n">global_df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;The number of cases (Global)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_data_preparation_48_0.png" src="_images/01_data_preparation_48_0.png" />
</div>
</div>
</div>
<div class="section" id="2-3.-Retrieve-total-population-data">
<h3>2-3. Retrieve total population data<a class="headerlink" href="#2-3.-Retrieve-total-population-data" title="Permalink to this heading"></a></h3>
<p>So that we can analyze the data, total population values are necessary (we will confirm this with <a class="reference external" href="https://lisphilar.github.io/covid19-sir/03_ode.html">Tutorial: SIR-derived ODE models</a> later).</p>
<p>Population data at <strong>country-level</strong> can be retrieved with <code class="docutils literal notranslate"><span class="pre">DataDownloader().layer(databases=[&quot;wpp&quot;])</span></code> via <code class="docutils literal notranslate"><span class="pre">DataEngineer().register(databases=[&quot;wpp&quot;])</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set layers and specify layer name of country</span>
<span class="c1"># (which will be converted to ISO3 code for standardization)</span>
<span class="n">eng</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">DataEngineer</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ISO3&quot;</span><span class="p">,</span> <span class="s2">&quot;City&quot;</span><span class="p">],</span> <span class="n">country</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ISO3&quot;</span><span class="p">])</span>
<span class="c1"># Download and automated registration of population data</span>
<span class="n">eng</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">databases</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;wpp&quot;</span><span class="p">])</span>
<span class="c1"># Specify date range to reduce the memory</span>
<span class="n">date_range</span> <span class="o">=</span> <span class="p">(</span><span class="n">all_df</span><span class="p">[</span><span class="s2">&quot;Date&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">all_df</span><span class="p">[</span><span class="s2">&quot;Date&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="n">eng</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">kinds</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;resample&quot;</span><span class="p">],</span> <span class="n">date_range</span><span class="o">=</span><span class="n">date_range</span><span class="p">)</span>
<span class="c1"># Show all data</span>
<span class="n">display</span><span class="p">(</span><span class="n">eng</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
<span class="c1"># Show citations</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">eng</span><span class="o">.</span><span class="n">citations</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2023-08-25 at 05:05:54 | <span class="ansi-bold">INFO</span> | <span class="ansi-bold">Retrieving datasets from World Population Prospects https://population.un.org/wpp/</span>
2023-08-25 at 05:06:05 | <span class="ansi-bold">INFO</span> | <span class="ansi-bold"> [INFO] &#39;Province&#39; layer was removed.</span>
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ISO3</th>
      <th>City</th>
      <th>Date</th>
      <th>Population</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ABW</td>
      <td>-</td>
      <td>2022-07-01</td>
      <td>106445.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>AIA</td>
      <td>-</td>
      <td>2022-07-01</td>
      <td>15857.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ASM</td>
      <td>-</td>
      <td>2022-07-01</td>
      <td>44273.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>AUS</td>
      <td>-</td>
      <td>2022-07-01</td>
      <td>26177413.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>AZE</td>
      <td>-</td>
      <td>2022-07-01</td>
      <td>10358074.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>57</th>
      <td>USA</td>
      <td>-</td>
      <td>2022-07-01</td>
      <td>338289857.0</td>
    </tr>
    <tr>
      <th>58</th>
      <td>VGB</td>
      <td>-</td>
      <td>2022-07-01</td>
      <td>31305.0</td>
    </tr>
    <tr>
      <th>59</th>
      <td>VIR</td>
      <td>-</td>
      <td>2022-07-01</td>
      <td>99465.0</td>
    </tr>
    <tr>
      <th>60</th>
      <td>WLF</td>
      <td>-</td>
      <td>2022-07-01</td>
      <td>11572.0</td>
    </tr>
    <tr>
      <th>61</th>
      <td>XKX</td>
      <td>-</td>
      <td>2022-07-01</td>
      <td>1659714.0</td>
    </tr>
  </tbody>
</table>
<p>62 rows × 4 columns</p>
</div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;United Nations, Department of Economic and Social Affairs, Population &#39;
 &#39;Division (2022). World Population Prospects 2022, Online Edition.&#39;]
</pre></div></div>
</div>
</div>
<div class="section" id="2-4.-Register-Monkeypox-data">
<h3>2-4. Register Monkeypox data<a class="headerlink" href="#2-4.-Register-Monkeypox-data" title="Permalink to this heading"></a></h3>
<p>Register the Monkeypox data to <code class="docutils literal notranslate"><span class="pre">DataEngineer()</span></code> instance.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eng</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">all_df</span><span class="p">,</span> <span class="n">citations</span><span class="o">=</span><span class="p">[</span><span class="n">mp_cite</span><span class="p">])</span>
<span class="c1"># Show all data</span>
<span class="n">display</span><span class="p">(</span><span class="n">eng</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
<span class="c1"># Show citations</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">eng</span><span class="o">.</span><span class="n">citations</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ISO3</th>
      <th>City</th>
      <th>Date</th>
      <th>Confirmed</th>
      <th>Fatal</th>
      <th>Population</th>
      <th>Recovered</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ABW</td>
      <td>-</td>
      <td>2022-01-16</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ABW</td>
      <td>-</td>
      <td>2022-01-17</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ABW</td>
      <td>-</td>
      <td>2022-01-18</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ABW</td>
      <td>-</td>
      <td>2022-01-19</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ABW</td>
      <td>-</td>
      <td>2022-01-20</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>70529</th>
      <td>ZMB</td>
      <td>-</td>
      <td>2022-09-18</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>70530</th>
      <td>ZMB</td>
      <td>-</td>
      <td>2022-09-19</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>70531</th>
      <td>ZMB</td>
      <td>-</td>
      <td>2022-09-20</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>70532</th>
      <td>ZMB</td>
      <td>-</td>
      <td>2022-09-21</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>70533</th>
      <td>ZMB</td>
      <td>-</td>
      <td>2022-09-22</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>&lt;NA&gt;</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>70534 rows × 7 columns</p>
</div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;United Nations, Department of Economic and Social Affairs, Population &#39;
 &#39;Division (2022). World Population Prospects 2022, Online Edition.&#39;,
 &#39;Global.health Monkeypox (accessed on 2023-08-25):\n&#39;
 &#39;Kraemer, Tegally, Pigott, Dasgupta, Sheldon, Wilkinson, Schultheiss, et al. &#39;
 &#39;Tracking the 2022 Monkeypox Outbreak with Epidemiological Data in Real-Time. &#39;
 &#39;The Lancet Infectious Diseases. &#39;
 &#39;https://doi.org/10.1016/S1473-3099(22)00359-0.\n&#39;
 &#39;European Centre for Disease Prevention and Control/WHO Regional Office for &#39;
 &#39;Europe. Monkeypox, Joint Epidemiological overview, 25 8, 2022&#39;]
</pre></div></div>
</div>
<p>Move forward to <a class="reference external" href="https://lisphilar.github.io/covid19-sir/02_data_engineering.html">Tutorial: Data engineering</a>.</p>
</div>
</div>
<div class="section" id="3.-Generator-of-sample-data-with-SIR-derived-ODE-model">
<h2>3. Generator of sample data with SIR-derived ODE model<a class="headerlink" href="#3.-Generator-of-sample-data-with-SIR-derived-ODE-model" title="Permalink to this heading"></a></h2>
<p>CovsirPhy can generate sample data with subclasses of <code class="docutils literal notranslate"><span class="pre">ODEModel</span></code> and <code class="docutils literal notranslate"><span class="pre">Dynamics</span></code> class. Refer to the followings.</p>
<div class="section" id="3.1-Sample-data-of-one-phase-ODE-model">
<h3>3.1 Sample data of one-phase ODE model<a class="headerlink" href="#3.1-Sample-data-of-one-phase-ODE-model" title="Permalink to this heading"></a></h3>
<p>Regarding ODE models, please refer to <a class="reference external" href="https://lisphilar.github.io/covid19-sir/03_ode.html">Tutorial: SIR-derived ODE models</a>. Here, we will create a sample data with one-phase SIR model and tau value 1440 min, the first date 01Jan2022, the last date 30Jun2022. ODE parameter values are preset.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create solver with preset</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">SIRModel</span><span class="o">.</span><span class="n">from_sample</span><span class="p">(</span><span class="n">date_range</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;01Jan2022&quot;</span><span class="p">,</span> <span class="s2">&quot;30Jun2022&quot;</span><span class="p">),</span> <span class="n">tau</span><span class="o">=</span><span class="mi">1440</span><span class="p">)</span>
<span class="c1"># Show settings</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">settings</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;date_range&#39;: (&#39;01Jan2022&#39;, &#39;30Jun2022&#39;),
 &#39;initial_dict&#39;: {&#39;Fatal or Recovered&#39;: 0,
                  &#39;Infected&#39;: 1000,
                  &#39;Susceptible&#39;: 999000},
 &#39;param_dict&#39;: {&#39;rho&#39;: 0.2, &#39;sigma&#39;: 0.075},
 &#39;tau&#39;: 1440}
</pre></div></div>
</div>
<p>Solve the ODE model with <code class="docutils literal notranslate"><span class="pre">ODEModel().solve()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">one_df</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">one_df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="n">display</span><span class="p">(</span><span class="n">one_df</span><span class="o">.</span><span class="n">tail</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Susceptible</th>
      <th>Infected</th>
      <th>Fatal or Recovered</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-01-01</th>
      <td>999000</td>
      <td>1000</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2022-01-02</th>
      <td>998787</td>
      <td>1133</td>
      <td>80</td>
    </tr>
    <tr>
      <th>2022-01-03</th>
      <td>998546</td>
      <td>1283</td>
      <td>170</td>
    </tr>
    <tr>
      <th>2022-01-04</th>
      <td>998273</td>
      <td>1454</td>
      <td>273</td>
    </tr>
    <tr>
      <th>2022-01-05</th>
      <td>997964</td>
      <td>1647</td>
      <td>389</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Susceptible</th>
      <th>Infected</th>
      <th>Fatal or Recovered</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-06-26</th>
      <td>88354</td>
      <td>750</td>
      <td>910895</td>
    </tr>
    <tr>
      <th>2022-06-27</th>
      <td>88342</td>
      <td>708</td>
      <td>910950</td>
    </tr>
    <tr>
      <th>2022-06-28</th>
      <td>88329</td>
      <td>669</td>
      <td>911002</td>
    </tr>
    <tr>
      <th>2022-06-29</th>
      <td>88318</td>
      <td>632</td>
      <td>911050</td>
    </tr>
    <tr>
      <th>2022-06-30</th>
      <td>88307</td>
      <td>596</td>
      <td>911096</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Plot the time-series data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cs</span><span class="o">.</span><span class="n">line_plot</span><span class="p">(</span><span class="n">one_df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Sample data of SIR model </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">settings</span><span class="p">()[</span><span class="s1">&#39;param_dict&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_data_preparation_60_0.png" src="_images/01_data_preparation_60_0.png" />
</div>
</div>
</div>
<div class="section" id="3.2-Sample-data-of-multi-phase-ODE-model">
<h3>3.2 Sample data of multi-phase ODE model<a class="headerlink" href="#3.2-Sample-data-of-multi-phase-ODE-model" title="Permalink to this heading"></a></h3>
<p>Regarding multi-phase ODE models, please refer to <a class="reference external" href="https://lisphilar.github.io/covid19-sir/04_phase_dependent.html">Phase-dependent SIR models</a>. Here, we will create a sample data with two-phase SIR model and tau value 1440 min, the first date 01Jan2022, the last date 30Jun2022.</p>
<div class="line-block">
<div class="line">The 0th phase: 01Jan2022 - 28Feb2022, rho=0.2, sigma=0.075 (preset)</div>
<div class="line">The 1st phase: 01Mar2022 - 30Jun2022, <strong>rho=0.4</strong>, sigma=0.075</div>
</div>
<p>We will use <code class="docutils literal notranslate"><span class="pre">Dynamics</span></code> class. At first, set the first/date of dynamics and set th 0th phase ODE parameters.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dyn</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">Dynamics</span><span class="o">.</span><span class="n">from_sample</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">cs</span><span class="o">.</span><span class="n">SIRModel</span><span class="p">,</span> <span class="n">date_range</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;01Jan2022&quot;</span><span class="p">,</span> <span class="s2">&quot;30Jun2022&quot;</span><span class="p">))</span>
<span class="c1"># Show summary</span>
<span class="n">dyn</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start</th>
      <th>End</th>
      <th>Rt</th>
      <th>rho</th>
      <th>sigma</th>
      <th>1/beta [day]</th>
      <th>1/gamma [day]</th>
    </tr>
    <tr>
      <th>Phase</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0th</th>
      <td>2022-01-01</td>
      <td>2022-06-30</td>
      <td>2.67</td>
      <td>0.2</td>
      <td>0.075</td>
      <td>5</td>
      <td>13</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Add the 1st phase with <code class="docutils literal notranslate"><span class="pre">Dynamics.register()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">setting_df</span> <span class="o">=</span> <span class="n">dyn</span><span class="o">.</span><span class="n">register</span><span class="p">()</span>
<span class="n">setting_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;01Mar2022&quot;</span><span class="p">:</span> <span class="s2">&quot;30Jun2022&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;rho&quot;</span><span class="p">,</span> <span class="s2">&quot;sigma&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.075</span><span class="p">]</span>
<span class="n">setting_df</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Susceptible</th>
      <th>Infected</th>
      <th>Recovered</th>
      <th>Fatal</th>
      <th>rho</th>
      <th>sigma</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-01-01</th>
      <td>999000</td>
      <td>1000</td>
      <td>0</td>
      <td>0</td>
      <td>0.2</td>
      <td>0.075</td>
    </tr>
    <tr>
      <th>2022-01-02</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>2022-01-03</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>2022-01-04</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>2022-01-05</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2022-06-26</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0.4</td>
      <td>0.075</td>
    </tr>
    <tr>
      <th>2022-06-27</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0.4</td>
      <td>0.075</td>
    </tr>
    <tr>
      <th>2022-06-28</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0.4</td>
      <td>0.075</td>
    </tr>
    <tr>
      <th>2022-06-29</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0.4</td>
      <td>0.075</td>
    </tr>
    <tr>
      <th>2022-06-30</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0.4</td>
      <td>0.075</td>
    </tr>
  </tbody>
</table>
<p>181 rows × 6 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dyn</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">setting_df</span><span class="p">)</span>
<span class="c1"># Show summary</span>
<span class="n">dyn</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start</th>
      <th>End</th>
      <th>Rt</th>
      <th>rho</th>
      <th>sigma</th>
      <th>1/beta [day]</th>
      <th>1/gamma [day]</th>
    </tr>
    <tr>
      <th>Phase</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0th</th>
      <td>2022-01-01</td>
      <td>2022-02-28</td>
      <td>2.67</td>
      <td>0.2</td>
      <td>0.075</td>
      <td>5</td>
      <td>13</td>
    </tr>
    <tr>
      <th>1st</th>
      <td>2022-03-01</td>
      <td>2022-06-30</td>
      <td>5.33</td>
      <td>0.4</td>
      <td>0.075</td>
      <td>2</td>
      <td>13</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Solve the ODE model with <code class="docutils literal notranslate"><span class="pre">Dynamics().simulate()</span></code> method and plot the time-series data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">two_df</span> <span class="o">=</span> <span class="n">dyn</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">model_specific</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">cs</span><span class="o">.</span><span class="n">line_plot</span><span class="p">(</span><span class="n">two_df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Sample data of two-phase SIR model&quot;</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;01Mar2022&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_data_preparation_67_0.png" src="_images/01_data_preparation_67_0.png" />
</div>
</div>
<p>When we need convert model-specific variables to model-free variables (Susceptible/Infected/Fatal/Recovered), we will set <code class="docutils literal notranslate"><span class="pre">model_specific=False</span></code> (default). Because R=”Fatal or Recovered” in SIR model, we assume that R=”Recovered” and F = 0.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">two_df</span> <span class="o">=</span> <span class="n">dyn</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">model_specific</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">cs</span><span class="o">.</span><span class="n">line_plot</span><span class="p">(</span><span class="n">two_df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Sample data of two-phase SIR model with SIRF variables&quot;</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;01Mar2022&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_data_preparation_69_0.png" src="_images/01_data_preparation_69_0.png" />
</div>
</div>
<p>Actually, observable variables are Population/Confirmed/Infected/Recovered. We can calculate Population and Confirmed as follows.</p>
<ul class="simple">
<li><p>Confirmed = Infected + Fatal + Recovered</p></li>
<li><p>Population = Susceptible + Confirmed</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">real_df</span> <span class="o">=</span> <span class="n">two_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">real_df</span><span class="p">[</span><span class="s2">&quot;Confirmed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">real_df</span><span class="p">[[</span><span class="s2">&quot;Infected&quot;</span><span class="p">,</span> <span class="s2">&quot;Fatal&quot;</span><span class="p">,</span> <span class="s2">&quot;Recovered&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">real_df</span><span class="p">[</span><span class="s2">&quot;Population&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">real_df</span><span class="p">[[</span><span class="s2">&quot;Susceptible&quot;</span><span class="p">,</span> <span class="s2">&quot;Confirmed&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">real_df</span> <span class="o">=</span> <span class="n">real_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;Population&quot;</span><span class="p">,</span> <span class="s2">&quot;Confirmed&quot;</span><span class="p">,</span> <span class="s2">&quot;Recovered&quot;</span><span class="p">,</span> <span class="s2">&quot;Fatal&quot;</span><span class="p">]]</span>
<span class="n">cs</span><span class="o">.</span><span class="n">line_plot</span><span class="p">(</span><span class="n">real_df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Sample data of two-phase SIR model with observable variables&quot;</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;01Mar2022&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_data_preparation_71_0.png" src="_images/01_data_preparation_71_0.png" />
</div>
</div>
<p>Thank you!</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="markdown/INSTALLATION.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="02_data_engineering.html" class="btn btn-neutral float-right" title="Data engineering" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2023, Hirokazu Takaya and CovsirPhy Development Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>