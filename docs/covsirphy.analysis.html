

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>covsirphy.analysis package &mdash; CovsirPhy  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="covsirphy.cleaning package" href="covsirphy.cleaning.html" />
    <link rel="prev" title="covsirphy package" href="covsirphy.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> CovsirPhy
          

          
          </a>

          
            
            
              <div class="version">
                2.17.0-epsilon
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">CovsirPhy introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="markdown/INSTALLATION.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="markdown/INSTALLATION.html#dataset-preparation">Dataset preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_quickest.html">Usage: quickest tour</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_quick.html">Usage: scenario analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_dataset.html">Usage: datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_phases.html">Usage: phases</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_theoretical.html">Usage: SIR-derived models</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="covsirphy.html">covsirphy package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="covsirphy.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">covsirphy.analysis package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-covsirphy.analysis.data_handler">covsirphy.analysis.data_handler module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-covsirphy.analysis.example_data">covsirphy.analysis.example_data module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-covsirphy.analysis.model_validator">covsirphy.analysis.model_validator module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-covsirphy.analysis.param_tracker">covsirphy.analysis.param_tracker module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-covsirphy.analysis.scenario">covsirphy.analysis.scenario module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="covsirphy.cleaning.html">covsirphy.cleaning package</a></li>
<li class="toctree-l3"><a class="reference internal" href="covsirphy.ode.html">covsirphy.ode package</a></li>
<li class="toctree-l3"><a class="reference internal" href="covsirphy.phase.html">covsirphy.phase package</a></li>
<li class="toctree-l3"><a class="reference internal" href="covsirphy.simulation.html">covsirphy.simulation package</a></li>
<li class="toctree-l3"><a class="reference internal" href="covsirphy.util.html">covsirphy.util package</a></li>
<li class="toctree-l3"><a class="reference internal" href="covsirphy.visualization.html">covsirphy.visualization package</a></li>
<li class="toctree-l3"><a class="reference internal" href="covsirphy.worldwide.html">covsirphy.worldwide package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="markdown/TERM.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="CODE_OF_CONDUCT.html">Contributor Covenant Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="SECURITY.html">Security policy of CovsirPhy</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Guideline of contribution</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CovsirPhy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="covsirphy.html">covsirphy package</a> &raquo;</li>
        
      <li>covsirphy.analysis package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/covsirphy.analysis.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-covsirphy.analysis">
<span id="covsirphy-analysis-package"></span><h1>covsirphy.analysis package<a class="headerlink" href="#module-covsirphy.analysis" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-covsirphy.analysis.data_handler">
<span id="covsirphy-analysis-data-handler-module"></span><h2>covsirphy.analysis.data_handler module<a class="headerlink" href="#module-covsirphy.analysis.data_handler" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="covsirphy.analysis.data_handler.DataHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">DataHandler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">country</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">province</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/data_handler.html#DataHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="covsirphy.util.html#covsirphy.util.term.Term" title="covsirphy.util.term.Term"><code class="xref py py-class docutils literal notranslate"><span class="pre">covsirphy.util.term.Term</span></code></a></p>
<p>Data handler for analysis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>country</strong> (<em>str</em>) – country name</p></li>
<li><p><strong>province</strong> (<em>str</em><em> or </em><em>None</em>) – province name</p></li>
<li><p><strong>kwargs</strong> – arguments of DataHandler.register()</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="covsirphy.analysis.data_handler.DataHandler.EXTRA_DICT">
<code class="sig-name descname"><span class="pre">EXTRA_DICT</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{'CountryData':</span> <span class="pre">&lt;class</span> <span class="pre">'covsirphy.cleaning.country_data.CountryData'&gt;,</span> <span class="pre">'OxCGRTData':</span> <span class="pre">&lt;class</span> <span class="pre">'covsirphy.cleaning.oxcgrt.OxCGRTData'&gt;,</span> <span class="pre">'PCRData':</span> <span class="pre">&lt;class</span> <span class="pre">'covsirphy.cleaning.pcr_data.PCRData'&gt;,</span> <span class="pre">'VaccineData':</span> <span class="pre">&lt;class</span> <span class="pre">'covsirphy.cleaning.vaccine_data.VaccineData'&gt;}</span></em><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.EXTRA_DICT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="covsirphy.analysis.data_handler.DataHandler.MAIN_DICT">
<code class="sig-name descname"><span class="pre">MAIN_DICT</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{'JHUData':</span> <span class="pre">&lt;class</span> <span class="pre">'covsirphy.cleaning.jhu_data.JHUData'&gt;,</span> <span class="pre">'PopulationData':</span> <span class="pre">&lt;class</span> <span class="pre">'covsirphy.cleaning.population.PopulationData'&gt;}</span></em><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.MAIN_DICT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.complemented">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">complemented</span></code><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.complemented" title="Permalink to this definition">¶</a></dt>
<dd><p>whether complemented or not and the details, None when not confirmed</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredMainError" title="covsirphy.NotRegisteredMainError"><strong>NotRegisteredMainError</strong></a> – no information because either JHUData or PopulationData was not registered</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>bool or str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.estimate_delay">
<code class="sig-name descname"><span class="pre">estimate_delay</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indicator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Period</span> <span class="pre">Length'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/data_handler.html#DataHandler.estimate_delay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.estimate_delay" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate the average day [days] between the indicator and the target.
We assume that the indicator impact on the target value with delay.
All results will be returned with a dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indicator</strong> (<em>str</em>) – indicator name, a column of any registered datasets</p></li>
<li><p><strong>target</strong> (<em>str</em>) – target name, a column of any registered datasets</p></li>
<li><p><strong>delay_name</strong> (<em>str</em>) – column name of delay in the output dataframe</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredMainError" title="covsirphy.NotRegisteredMainError"><strong>NotRegisteredMainError</strong></a> – either JHUData or PopulationData was not registered</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.SubsetNotFoundError" title="covsirphy.SubsetNotFoundError"><strong>SubsetNotFoundError</strong></a> – failed in subsetting because of lack of data</p></li>
<li><p><strong>UserWarning</strong> – failed in calculating and returned the default value (recovery period)</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Index</dt><dd><p>reset index</p>
</dd>
<dt>Columns</dt><dd><ul class="simple">
<li><p>(int or float): column defined by &#64;indicator</p></li>
<li><p>(int or float): column defined by &#64;target</p></li>
<li><p>(int): column defined by &#64;delay_name [days]</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>We use change point analysis of ruptures package. Refer to the documentation.
<a class="reference external" href="https://centre-borelli.github.io/ruptures-docs/">https://centre-borelli.github.io/ruptures-docs/</a></p></li>
<li><p>When failed in calculation, recovery period will be returned after raising UserWarning.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.first_date">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">first_date</span></code><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.first_date" title="Permalink to this definition">¶</a></dt>
<dd><p>the first date of the records</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.last_date">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">last_date</span></code><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.last_date" title="Permalink to this definition">¶</a></dt>
<dd><p>the last date of the records</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.main_satisfied">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">main_satisfied</span></code><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.main_satisfied" title="Permalink to this definition">¶</a></dt>
<dd><p>all main datasets were registered or not</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.population">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">population</span></code><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.population" title="Permalink to this definition">¶</a></dt>
<dd><p>population value</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredMainError" title="covsirphy.NotRegisteredMainError"><strong>NotRegisteredMainError</strong></a> – no information because either JHUData or PopulationData was not registered</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.records">
<code class="sig-name descname"><span class="pre">records</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">main</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extras</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">past</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/data_handler.html#DataHandler.records"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.records" title="Permalink to this definition">¶</a></dt>
<dd><p>Return records of the datasets as a dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>main</strong> (<em>bool</em>) – whether include main datasets or not</p></li>
<li><p><strong>extras</strong> (<em>bool</em>) – whether include extra datasets or not</p></li>
<li><p><strong>past</strong> (<em>bool</em>) – whether include past records or not</p></li>
<li><p><strong>future</strong> (<em>bool</em>) – whether include future records or not</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredMainError" title="covsirphy.NotRegisteredMainError"><strong>NotRegisteredMainError</strong></a> – either JHUData or PopulationData was not registered</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.SubsetNotFoundError" title="covsirphy.SubsetNotFoundError"><strong>SubsetNotFoundError</strong></a> – failed in subsetting because of lack of data</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredExtraError" title="covsirphy.NotRegisteredExtraError"><strong>NotRegisteredExtraError</strong></a> – &#64;extras is True and no extra datasets were registered</p></li>
<li><p><strong>ValueError</strong> – both of &#64;main and &#64;extras were False, or both of &#64;past and &#64;future were False</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Index</dt><dd><p>reset index</p>
</dd>
<dt>Columns:</dt><dd><ul class="simple">
<li><p>Date(pd.TimeStamp): Observation date</p></li>
<li><dl class="simple">
<dt>if &#64;main is True,</dt><dd><ul>
<li><p>Confirmed(int): the number of confirmed cases</p></li>
<li><p>Infected(int): the number of currently infected cases</p></li>
<li><p>Fatal(int): the number of fatal cases</p></li>
<li><p>Recovered (int): the number of recovered cases ( &gt; 0)</p></li>
<li><p>Susceptible(int): the number of susceptible cases</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>if &#64;extra is True,</dt><dd><ul>
<li><p>columns defined in the extra datasets</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.records_all">
<code class="sig-name descname"><span class="pre">records_all</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/data_handler.html#DataHandler.records_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.records_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return registered all records of the datasets as a dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredMainError" title="covsirphy.NotRegisteredMainError"><strong>NotRegisteredMainError</strong></a> – either JHUData or PopulationData was not registered</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.SubsetNotFoundError" title="covsirphy.SubsetNotFoundError"><strong>SubsetNotFoundError</strong></a> – failed in subsetting because of lack of data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Index</dt><dd><p>reset index</p>
</dd>
<dt>Columns:</dt><dd><ul class="simple">
<li><p>Date(pd.TimeStamp): Observation date</p></li>
<li><p>Confirmed(int): the number of confirmed cases</p></li>
<li><p>Infected(int): the number of currently infected cases</p></li>
<li><p>Fatal(int): the number of fatal cases</p></li>
<li><p>Recovered (int): the number of recovered cases ( &gt; 0)</p></li>
<li><p>Susceptible(int): the number of susceptible cases</p></li>
<li><p>columns defined in the extra datasets</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.records_extras">
<code class="sig-name descname"><span class="pre">records_extras</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/data_handler.html#DataHandler.records_extras"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.records_extras" title="Permalink to this definition">¶</a></dt>
<dd><p>Return records of the extra datasets as a dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredMainError" title="covsirphy.NotRegisteredMainError"><strong>NotRegisteredMainError</strong></a> – either JHUData or PopulationData was not registered</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredExtraError" title="covsirphy.NotRegisteredExtraError"><strong>NotRegisteredExtraError</strong></a> – no extra datasets were registered</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Index</dt><dd><p>reset index</p>
</dd>
<dt>Columns:</dt><dd><ul class="simple">
<li><p>Date(pd.TimeStamp): Observation date</p></li>
<li><p>columns defined in the extra datasets</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.records_main">
<code class="sig-name descname"><span class="pre">records_main</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/data_handler.html#DataHandler.records_main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.records_main" title="Permalink to this definition">¶</a></dt>
<dd><p>Return records of the main datasets as a dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredMainError" title="covsirphy.NotRegisteredMainError"><strong>NotRegisteredMainError</strong></a> – either JHUData or PopulationData was not registered</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.SubsetNotFoundError" title="covsirphy.SubsetNotFoundError"><strong>SubsetNotFoundError</strong></a> – failed in subsetting because of lack of data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Index</dt><dd><p>reset index</p>
</dd>
<dt>Columns:</dt><dd><ul class="simple">
<li><p>Date(pd.TimeStamp): Observation date</p></li>
<li><p>Confirmed(int): the number of confirmed cases</p></li>
<li><p>Infected(int): the number of currently infected cases</p></li>
<li><p>Fatal(int): the number of fatal cases</p></li>
<li><p>Recovered (int): the number of recovered cases ( &gt; 0)</p></li>
<li><p>Susceptible(int): the number of susceptible cases</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.recovery_period">
<code class="sig-name descname"><span class="pre">recovery_period</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/data_handler.html#DataHandler.recovery_period"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.recovery_period" title="Permalink to this definition">¶</a></dt>
<dd><p>Return representative value of recovery period of all countries.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredMainError" title="covsirphy.NotRegisteredMainError"><strong>NotRegisteredMainError</strong></a> – JHUData was not registered</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>recovery period [days]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.register">
<code class="sig-name descname"><span class="pre">register</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jhu_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">population_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extras</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/data_handler.html#DataHandler.register"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jhu_data</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.JHUData" title="covsirphy.JHUData"><em>covsirphy.JHUData</em></a><em> or </em><em>None</em>) – object of records</p></li>
<li><p><strong>population_data</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.PopulationData" title="covsirphy.PopulationData"><em>covsirphy.PopulationData</em></a><em> or </em><em>None</em>) – PopulationData object</p></li>
<li><p><strong>extras</strong> (<em>list</em><em>[</em><a class="reference internal" href="covsirphy.html#covsirphy.CleaningBase" title="covsirphy.CleaningBase"><em>covsirphy.CleaningBase</em></a><em>] or </em><em>None</em>) – extra datasets</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – non-data cleaning instance was included</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.UnExpectedValueError" title="covsirphy.UnExpectedValueError"><strong>UnExpectedValueError</strong></a> – instance of un-expected data cleaning class was included as an extra dataset</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.show_complement">
<code class="sig-name descname"><span class="pre">show_complement</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/data_handler.html#DataHandler.show_complement"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.show_complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the details of complement that was (or will be) performed for the records.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredMainError" title="covsirphy.NotRegisteredMainError"><strong>NotRegisteredMainError</strong></a> – JHUData was not registered</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>as the same as JHUData.show_complement()</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Keyword arguments of JHUData,subset_complement() can be specified with DataHandler.switch_complement().</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.switch_complement">
<code class="sig-name descname"><span class="pre">switch_complement</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">whether</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/data_handler.html#DataHandler.switch_complement"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.switch_complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch whether perform auto complement or not. (Default: True)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>whether</strong> (<em>bool</em><em> or </em><em>None</em>) – if True and necessary, the number of cases will be complemented</p></li>
<li><p><strong>kwargs</strong> – the other arguments of JHUData.subset_complement()</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When &#64;whether is None, &#64;whether will not be changed.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.timepoints">
<code class="sig-name descname"><span class="pre">timepoints</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">first_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">today</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/data_handler.html#DataHandler.timepoints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.timepoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the range of data and reference date to determine past/future of phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>first_date</strong> (<em>str</em><em> or </em><em>None</em>) – the first date of the records or None (min date of main dataset)</p></li>
<li><p><strong>last_date</strong> (<em>str</em><em> or </em><em>None</em>) – the first date of the records or None (max date of main dataset)</p></li>
<li><p><strong>today</strong> (<em>str</em><em> or </em><em>None</em>) – reference date to determine whether a phase is a past phase or a future phase</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredMainError" title="covsirphy.NotRegisteredMainError"><strong>NotRegisteredMainError</strong></a> – either JHUData or PopulationData was not registered</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.SubsetNotFoundError" title="covsirphy.SubsetNotFoundError"><strong>SubsetNotFoundError</strong></a> – failed in subsetting because of lack of data</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When &#64;today is None, the reference date will be the same as &#64;last_date (or max date).</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.data_handler.DataHandler.today">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">today</span></code><a class="headerlink" href="#covsirphy.analysis.data_handler.DataHandler.today" title="Permalink to this definition">¶</a></dt>
<dd><p>reference date to determine whether a phase is a past phase or a future phase</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-covsirphy.analysis.example_data">
<span id="covsirphy-analysis-example-data-module"></span><h2>covsirphy.analysis.example_data module<a class="headerlink" href="#module-covsirphy.analysis.example_data" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="covsirphy.analysis.example_data.ExampleData">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">ExampleData</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clean_df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1440</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'22Jan2020'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/example_data.html#ExampleData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.example_data.ExampleData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="covsirphy.cleaning.html#covsirphy.cleaning.jhu_data.JHUData" title="covsirphy.cleaning.jhu_data.JHUData"><code class="xref py py-class docutils literal notranslate"><span class="pre">covsirphy.cleaning.jhu_data.JHUData</span></code></a></p>
<p>Example dataset as a child class of JHUData.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>clean_df</strong> (<em>pandas.DataFrame</em><em> or </em><em>None</em>) – <p>cleaned data</p>
<dl class="simple">
<dt>Index</dt><dd><ul>
<li><p>reset index</p></li>
</ul>
</dd>
<dt>Columns</dt><dd><ul>
<li><p>Date (pd.TimeStamp): Observation date</p></li>
<li><p>Country (pandas.Category): country/region name</p></li>
<li><p>Province (pandas.Category): province/prefecture/sstate name</p></li>
<li><p>Confirmed (int): the number of confirmed cases</p></li>
<li><p>Infected (int): the number of currently infected cases</p></li>
<li><p>Fatal (int): the number of fatal cases</p></li>
<li><p>Recovered (int): the number of recovered cases</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>tau</strong> (<em>int</em>) – tau value [min]</p></li>
<li><p><strong>start_date</strong> (<em>str</em>) – start date, like 22Jan2020</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="covsirphy.analysis.example_data.ExampleData.add">
<code class="sig-name descname"><span class="pre">add</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">province</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/example_data.html#ExampleData.add"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.example_data.ExampleData.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add example data.
If the country has been registered,
the start date will be the next data of the registered records.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>cs.ModelBase</em>) – the first ODE model</p></li>
<li><p><strong>country</strong> (<em>str</em><em> or </em><em>None</em>) – country name</p></li>
<li><p><strong>province</strong> (<em>str</em><em> or </em><em>None</em>) – province name</p></li>
<li><p><strong>kwargs</strong> – the other keyword arguments of ODESimulator.add()</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If country is None, the name of the model will be used.
If province is None, ‘-‘ will be used.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.example_data.ExampleData.non_dim">
<code class="sig-name descname"><span class="pre">non_dim</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">province</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/example_data.html#ExampleData.non_dim"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.example_data.ExampleData.non_dim" title="Permalink to this definition">¶</a></dt>
<dd><p>Return non-dimensional data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>cs.ModelBase</em><em> or </em><em>None</em>) – the first ODE model</p></li>
<li><p><strong>country</strong> (<em>str</em><em> or </em><em>None</em>) – country name</p></li>
<li><p><strong>province</strong> (<em>str</em><em> or </em><em>None</em>) – province name</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If country is None, the name of the model will be used.
If province is None, ‘-‘ will be used.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.example_data.ExampleData.records">
<code class="sig-name descname"><span class="pre">records</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/example_data.html#ExampleData.records"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.example_data.ExampleData.records" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the same as ExampleData.subset().
Complement will not be done.</p>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.example_data.ExampleData.specialized">
<code class="sig-name descname"><span class="pre">specialized</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">province</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/example_data.html#ExampleData.specialized"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.example_data.ExampleData.specialized" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dimensional records with model variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>cs.ModelBase</em><em> or </em><em>None</em>) – the first ODE model</p></li>
<li><p><strong>country</strong> (<em>str</em><em> or </em><em>None</em>) – country name</p></li>
<li><p><strong>province</strong> (<em>str</em><em> or </em><em>None</em>) – province name</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If country is None, the name of the model will be used.
If province is None, ‘-‘ will be used.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.example_data.ExampleData.subset">
<code class="sig-name descname"><span class="pre">subset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">province</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/example_data.html#ExampleData.subset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.example_data.ExampleData.subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the subset of dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>cs.ModelBase</em><em> or </em><em>None</em>) – the first ODE model</p></li>
<li><p><strong>country</strong> (<em>str</em><em> or </em><em>None</em>) – country name</p></li>
<li><p><strong>province</strong> (<em>str</em><em> or </em><em>None</em>) – province name</p></li>
<li><p><strong>kwargs</strong> – other keyword arguments of JHUData.subset()</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>(pandas.DataFrame)</dt><dd><dl class="simple">
<dt>Index</dt><dd><p>reset index</p>
</dd>
<dt>Columns</dt><dd><ul class="simple">
<li><p>Date (pd.TimeStamp): Observation date</p></li>
<li><p>Confirmed (int): the number of confirmed cases</p></li>
<li><p>Infected (int): the number of currently infected cases</p></li>
<li><p>Fatal (int): the number of fatal cases</p></li>
<li><p>Recovered (int): the number of recovered cases (&gt; 0)</p></li>
<li><p>Susceptible (int): the number of susceptible cases, if calculated</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If country is None, the name of the model will be used.
If province is None, ‘-‘ will be used.
If &#64;population is not None, the number of susceptible cases will be calculated.
Records with Recovered &gt; 0 will be selected.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.example_data.ExampleData.subset_complement">
<code class="sig-name descname"><span class="pre">subset_complement</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/example_data.html#ExampleData.subset_complement"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.example_data.ExampleData.subset_complement" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the same as ExampleData.subset().
Complement will not be done.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-covsirphy.analysis.model_validator">
<span id="covsirphy-analysis-model-validator-module"></span><h2>covsirphy.analysis.model_validator module<a class="headerlink" href="#module-covsirphy.analysis.model_validator" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="covsirphy.analysis.model_validator.ModelValidator">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">ModelValidator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1440</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_trials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/model_validator.html#ModelValidator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.model_validator.ModelValidator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="covsirphy.util.html#covsirphy.util.term.Term" title="covsirphy.util.term.Term"><code class="xref py py-class docutils literal notranslate"><span class="pre">covsirphy.util.term.Term</span></code></a></p>
<p>Validate a ODE model as follows.
- Create a model parameter set, phase length and initial values randomly.
- Simulate the number of cases with an user-defined parameter set.
- Perform parameter estimation with the theoretical data (the dataset created with step 1).
- Compare the user-defined parameter set and estimated parameter set.
- Repeat with anather set of parameters.
- Small difference of the two parameter sets means that the model can be used for parameter estimation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tau</strong> (<em>int</em>) – tau value [min]</p></li>
<li><p><strong>n_trials</strong> (<em>int</em>) – the number of trials</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – random seed</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Population value and initial values are defined by model.EXAMPLE.
Estimators know tau values before parameter estimation.</p>
</div>
<dl class="py method">
<dt id="covsirphy.analysis.model_validator.ModelValidator.run">
<code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">180</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.98,</span> <span class="pre">1.02)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/model_validator.html#ModelValidator.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.model_validator.ModelValidator.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute model validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.ModelBase" title="covsirphy.ModelBase"><em>covsirphy.ModelBase</em></a>) – ODE model</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time-out of run</p></li>
<li><p><strong>allowance</strong> (<em>tuple</em><em>(</em><em>float</em><em>, </em><em>float</em><em>)</em>) – the allowance of the predicted value</p></li>
<li><p><strong>n_jobs</strong> (<em>int</em>) – the number of parallel jobs or -1 (CPU count)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.ModelValidator" title="covsirphy.ModelValidator">covsirphy.ModelValidator</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.model_validator.ModelValidator.summary">
<code class="sig-name descname"><span class="pre">summary</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/model_validator.html#ModelValidator.summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.model_validator.ModelValidator.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the summary of validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Index</dt><dd><p>reset index</p>
</dd>
<dt>Columns</dt><dd><ul class="simple">
<li><p>ID (str): ID, like SIR_0</p></li>
<li><p>ODE (str): model name</p></li>
<li><p>Rt (float): reproduction number set by ._setup() method</p></li>
<li><p>Rt_est (float): estimated reproduction number</p></li>
<li><p>rho etc. (float): parameter values set by ._setup() method</p></li>
<li><p>rho_est etc. (float): estimated parameter values</p></li>
<li><p>step_n (int): step number of simulation</p></li>
<li><p>RMSLE (float): RMSLE score of parameter estimation</p></li>
<li><p>Trials (int): the number of trials in parameter estimation</p></li>
<li><p>Runtime (str): runtime of parameter estimation</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-covsirphy.analysis.param_tracker">
<span id="covsirphy-analysis-param-tracker-module"></span><h2>covsirphy.analysis.param_tracker module<a class="headerlink" href="#module-covsirphy.analysis.param_tracker" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="covsirphy.analysis.param_tracker.ParamTracker">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">ParamTracker</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phase_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">area</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="covsirphy.util.html#covsirphy.util.term.Term" title="covsirphy.util.term.Term"><code class="xref py py-class docutils literal notranslate"><span class="pre">covsirphy.util.term.Term</span></code></a></p>
<p>Split records with S-R trend analysis and estimate parameter values of the phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record_df</strong> (<em>pandas.DataFrame</em>) – <p>records</p>
<dl class="simple">
<dt>Index</dt><dd><p>reset index</p>
</dd>
<dt>Columns</dt><dd><ul>
<li><p>Date (pandas.TimeStamp): Observation date</p></li>
<li><p>Confirmed (int): the number of confirmed cases</p></li>
<li><p>Infected (int): the number of currently infected cases</p></li>
<li><p>Fatal (int): the number of fatal cases</p></li>
<li><p>Recovered (int): the number of recovered cases</p></li>
<li><p>Susceptible (int): the number of susceptible cases</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>phase_series</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.PhaseSeries" title="covsirphy.PhaseSeries"><em>covsirphy.PhaseSeries</em></a>) – phase series object with first/last dates and population</p></li>
<li><p><strong>area</strong> (<em>str</em><em> or </em><em>None</em>) – area name, like Japan/Tokyo, or empty string</p></li>
<li><p><strong>tau</strong> (<em>int</em><em> or </em><em>None</em>) – tau value [min]</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.METRICS_DICT">
<code class="sig-name descname"><span class="pre">METRICS_DICT</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{'MAE':</span> <span class="pre">&lt;function</span> <span class="pre">mean_absolute_error&gt;,</span> <span class="pre">'MSE':</span> <span class="pre">&lt;function</span> <span class="pre">mean_squared_error&gt;,</span> <span class="pre">'MSLE':</span> <span class="pre">&lt;function</span> <span class="pre">mean_squared_log_error&gt;,</span> <span class="pre">'RMSE':</span> <span class="pre">&lt;function</span> <span class="pre">ParamTracker.&lt;lambda&gt;&gt;,</span> <span class="pre">'RMSLE':</span> <span class="pre">&lt;function</span> <span class="pre">ParamTracker.&lt;lambda&gt;&gt;}</span></em><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.METRICS_DICT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.add">
<code class="sig-name descname"><span class="pre">add</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">days</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">population</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.add"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new phase.
The start date will be the next date of the last registered phase.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>end_date</strong> (<em>str</em>) – end date of the new phase</p></li>
<li><p><strong>days</strong> (<em>int</em>) – the number of days to add</p></li>
<li><p><strong>population</strong> (<em>int</em><em> or </em><em>None</em>) – population value of the start date</p></li>
<li><p><strong>model</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.ModelBase" title="covsirphy.ModelBase"><em>covsirphy.ModelBase</em></a><em> or </em><em>None</em>) – ODE model</p></li>
<li><p><strong>kwargs</strong> – keyword arguments of ODE model parameters, not including tau value</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>covsirphy.PhaseSeries</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If the phases series has not been registered, new phase series will be created.</p></li>
<li><p>Either &#64;end_date or &#64;days must be specified.</p></li>
<li><p>If &#64;end_date and &#64;days are None, the end date will be the last date of the records.</p></li>
<li><p>If both of &#64;end_date and &#64;days were specified, &#64;end_date will be used.</p></li>
<li><p>If &#64;popultion is None, initial value will be used.</p></li>
<li><p>If &#64;model is None, the model of the last phase will be used.</p></li>
<li><p>Tau will be fixed as the last phase’s value.</p></li>
<li><p>kwargs: Default values are the parameter values of the last phase.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.all_phases">
<code class="sig-name descname"><span class="pre">all_phases</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.all_phases"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.all_phases" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the names of all enabled phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the names of all enabled phases</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.change_dates">
<code class="sig-name descname"><span class="pre">change_dates</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.change_dates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.change_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of changed dates (start dates of phases since 1st phase).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of change dates</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.combine">
<code class="sig-name descname"><span class="pre">combine</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phases</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">population</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.combine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.combine" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine the sequential phases as one phase.
New phase name will be automatically determined.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phases</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – list of phases</p></li>
<li><p><strong>population</strong> (<em>int</em>) – population value of the start date</p></li>
<li><p><strong>kwargs</strong> – keyword arguments to save as phase information</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – &#64;phases is not a list</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>self</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="covsirphy.html#covsirphy.Scenario" title="covsirphy.Scenario">covsirphy.Scenario</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.create_series">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">create_series</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">first_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">population</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.create_series"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.create_series" title="Permalink to this definition">¶</a></dt>
<dd><p>Create PhaseSeries instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>first_date</strong> (<em>str</em>) – the first date of the records</p></li>
<li><p><strong>last_date</strong> (<em>str</em>) – the last date of the records</p></li>
<li><p><strong>population</strong> (<em>int</em>) – population value</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>covsirphy.PhaseSeries</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.delete">
<code class="sig-name descname"><span class="pre">delete</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phases</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete selected phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>phases</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – phases names to delete</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>covsirphy.PhaseSeries</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.delete_all">
<code class="sig-name descname"><span class="pre">delete_all</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.delete_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.delete_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>covsirphy.PhaseSeries</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.disable">
<code class="sig-name descname"><span class="pre">disable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phases</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.disable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.disable" title="Permalink to this definition">¶</a></dt>
<dd><p>The phases will be disabled.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>phase</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – phase names or None (all enabled phases)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>covsirphy.PhaseSeries</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.enable">
<code class="sig-name descname"><span class="pre">enable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phases</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.enable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.enable" title="Permalink to this definition">¶</a></dt>
<dd><p>The phases will be enabled.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>phase</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – phase names or None (all disabled phases)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>covsirphy.PhaseSeries</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.estimate">
<code class="sig-name descname"><span class="pre">estimate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.estimate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.estimate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform parameter estimation for each phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.ModelBase" title="covsirphy.ModelBase"><em>covsirphy.ModelBase</em></a>) – ODE model</p></li>
<li><p><strong>phases</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – list of phase names, like 1st, 2nd…</p></li>
<li><p><strong>n_jobs</strong> (<em>int</em>) – the number of parallel jobs or -1 (CPU count)</p></li>
<li><p><strong>kwargs</strong> – keyword arguments of model parameters and covsirphy.Estimator.run()</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tau value [min] and phase series</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple(int, <a class="reference internal" href="covsirphy.html#covsirphy.PhaseSeries" title="covsirphy.PhaseSeries">covsirphy.PhaseSeries</a>)</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If &#64;phases is None, all past phase will be used.</p></li>
<li><p>Phases with estimated parameter values will be ignored.</p></li>
<li><p>In kwargs, tau value cannot be included.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.find_phase">
<code class="sig-name descname"><span class="pre">find_phase</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.find_phase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.find_phase" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the name of the phase which has the date.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date</strong> (<em>str</em>) – date, like 01Jan2020</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str: phase name, like 1st, 2nd,…
covsirphy.PhaseUnit: phase unit</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple(str, <a class="reference internal" href="covsirphy.html#covsirphy.PhaseUnit" title="covsirphy.PhaseUnit">covsirphy.PhaseUnit</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.future_phases">
<code class="sig-name descname"><span class="pre">future_phases</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.future_phases"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.future_phases" title="Permalink to this definition">¶</a></dt>
<dd><p>Return names and phase units of the future phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list[str]: list of phase names
list[covsirphy.PhaseUnit]: list of phase units</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple(list[str], list[<a class="reference internal" href="covsirphy.html#covsirphy.PhaseUnit" title="covsirphy.PhaseUnit">covsirphy.PhaseUnit</a>])</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.last_model">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">last_model</span></code><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.last_model" title="Permalink to this definition">¶</a></dt>
<dd><p>ODE model if the last phase</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.ModelBase" title="covsirphy.ModelBase">covsirphy.ModelBase</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.near_change_dates">
<code class="sig-name descname"><span class="pre">near_change_dates</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.near_change_dates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.near_change_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the list of dates which are yesterday/tomorrow of the start/end dates.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of dates</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.past_phases">
<code class="sig-name descname"><span class="pre">past_phases</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.past_phases"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.past_phases" title="Permalink to this definition">¶</a></dt>
<dd><p>Return names and phase units of the past phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>phases</strong> (<em>tuple/list</em><em>[</em><em>str</em><em>]</em>) – list of phase names, like 1st, 2nd…</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list[str]: list of phase names
list[covsirphy.PhaseUnit]: list of phase units</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple(list[str], list[<a class="reference internal" href="covsirphy.html#covsirphy.PhaseUnit" title="covsirphy.PhaseUnit">covsirphy.PhaseUnit</a>])</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If &#64;phases is None, return the all past phases.
If &#64;phases is not None, intersection will be selected.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.score">
<code class="sig-name descname"><span class="pre">score</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metrics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'RMSLE'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y0_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.score"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.score" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate accuracy of phase setting and parameter estimation of selected enabled phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>metrics</strong> (<em>str</em>) – “MAE”, “MSE”, “MSLE”, “RMSE” or “RMSLE”</p></li>
<li><p><strong>variables</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – variables to use in calculation</p></li>
<li><p><strong>phases</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – phases to use in calculation</p></li>
<li><p><strong>y0_dict</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>float</em><em>] or </em><em>None</em>) – dictionary of initial values of variables</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>score with the specified metrics</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If &#64;variables is None, [“Infected”, “Fatal”, “Recovered”] will be used.
“Confirmed”, “Infected”, “Fatal” and “Recovered” can be used in &#64;variables.
If &#64;phases is None, all phases will be used.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.separate">
<code class="sig-name descname"><span class="pre">separate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">population</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.separate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.separate" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new phase with the change point.
New phase name will be automatically determined.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> (<em>str</em>) – change point, i.e. start date of the new phase</p></li>
<li><p><strong>population</strong> (<em>int</em>) – population value of the change point</p></li>
<li><p><strong>kwargs</strong> – keyword arguments of PhaseUnit.set_ode() if update is necessary</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>covsirphy.PhaseSeries</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.series">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">series</span></code><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.series" title="Permalink to this definition">¶</a></dt>
<dd><p>phase series object (series of covsirphy.PhaseUnit)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.PhaseSeries" title="covsirphy.PhaseSeries">covsirphy.PhaseSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.simulate">
<code class="sig-name descname"><span class="pre">simulate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y0_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.simulate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.simulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate ODE models with set/estimated parameter values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>y0_dict</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>float</em><em>] or </em><em>None</em>) – dictionary of initial values of variables</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>pandas.DataFrame</dt><dd><dl class="simple">
<dt>Index</dt><dd><p>reset index</p>
</dd>
<dt>Columns</dt><dd><ul class="simple">
<li><p>Date (pd.TimeStamp): Observation date</p></li>
<li><p>Country (str): country/region name</p></li>
<li><p>Province (str): province/prefecture/state name</p></li>
<li><p>Variables of the model and dataset (int): Confirmed etc.</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.param_tracker.ParamTracker.trend">
<code class="sig-name descname"><span class="pre">trend</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_figure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/param_tracker.html#ParamTracker.trend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.param_tracker.ParamTracker.trend" title="Permalink to this definition">¶</a></dt>
<dd><p>Split the records with trend analysis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>force</strong> (<em>bool</em>) – if True, change points will be over-written</p></li>
<li><p><strong>show_figure</strong> (<em>bool</em>) – if True, show the result as a figure</p></li>
<li><p><strong>kwargs</strong> – keyword arguments of covsirphy.ChangeFinder() and covsirphy.trend_plot()</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>covsirphy.PhaseSeries</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-covsirphy.analysis.scenario">
<span id="covsirphy-analysis-scenario-module"></span><h2>covsirphy.analysis.scenario module<a class="headerlink" href="#module-covsirphy.analysis.scenario" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="covsirphy.analysis.scenario.Scenario">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Scenario</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jhu_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">population_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">province</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_complement</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="covsirphy.util.html#covsirphy.util.term.Term" title="covsirphy.util.term.Term"><code class="xref py py-class docutils literal notranslate"><span class="pre">covsirphy.util.term.Term</span></code></a></p>
<p>Scenario analysis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jhu_data</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.JHUData" title="covsirphy.JHUData"><em>covsirphy.JHUData</em></a><em> or </em><em>None</em>) – object of records</p></li>
<li><p><strong>population_data</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.PopulationData" title="covsirphy.PopulationData"><em>covsirphy.PopulationData</em></a><em> or </em><em>None</em>) – PopulationData object</p></li>
<li><p><strong>country</strong> (<em>str</em>) – country name (must not be None)</p></li>
<li><p><strong>province</strong> (<em>str</em><em> or </em><em>None</em>) – province name</p></li>
<li><p><strong>tau</strong> (<em>int</em><em> or </em><em>None</em>) – tau value</p></li>
<li><p><strong>auto_complement</strong> (<em>bool</em>) – if True and necessary, the number of cases will be complemented</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>&#64;jhu_data and &#64;population_data must be registered with Scenario.register() if not specified here.</p>
</div>
<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.add">
<code class="sig-name descname"><span class="pre">add</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">days</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">population</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.add"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new phase.
The start date will be the next date of the last registered phase.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – phase series name, ‘Main’ or user-defined name</p></li>
<li><p><strong>end_date</strong> (<em>str</em>) – end date of the new phase</p></li>
<li><p><strong>days</strong> (<em>int</em>) – the number of days to add</p></li>
<li><p><strong>population</strong> (<em>int</em><em> or </em><em>None</em>) – population value of the start date</p></li>
<li><p><strong>model</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.ModelBase" title="covsirphy.ModelBase"><em>covsirphy.ModelBase</em></a><em> or </em><em>None</em>) – ODE model</p></li>
<li><p><strong>kwargs</strong> – keyword arguments of ODE model parameters, not including tau value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.Scenario" title="covsirphy.Scenario">covsirphy.Scenario</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If the phases series has not been registered, new phase series will be created.</p></li>
<li><p>Either &#64;end_date or &#64;days must be specified.</p></li>
<li><p>If &#64;end_date and &#64;days are None, the end date will be the last date of the records.</p></li>
<li><p>If both of &#64;end_date and &#64;days were specified, &#64;end_date will be used.</p></li>
<li><p>If &#64;popultion is None, initial value will be used.</p></li>
<li><p>If &#64;model is None, the model of the last phase will be used.</p></li>
<li><p>Tau will be fixed as the last phase’s value.</p></li>
<li><p>kwargs: Default values are the parameter values of the last phase.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.add_phase">
<code class="sig-name descname"><span class="pre">add_phase</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.add_phase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.clear">
<code class="sig-name descname"><span class="pre">clear</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_past</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear phase information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – scenario name</p></li>
<li><p><strong>include_past</strong> (<em>bool</em>) – if True, past phases will be removed as well as future phases</p></li>
<li><p><strong>template</strong> (<em>str</em>) – name of template scenario</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.Scenario" title="covsirphy.Scenario">covsirphy.Scenario</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If un-registered scenario name was specified, new scenario will be created.
Future phases will be always deleted.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.combine">
<code class="sig-name descname"><span class="pre">combine</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phases</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">population</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.combine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.combine" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine the sequential phases as one phase.
New phase name will be automatically determined.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phases</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – list of phases</p></li>
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>) – name of phase series</p></li>
<li><p><strong>population</strong> (<em>int</em>) – population value of the start date</p></li>
<li><p><strong>kwargs</strong> – keyword arguments to save as phase information</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – &#64;phases is not a list</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>self</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="covsirphy.html#covsirphy.Scenario" title="covsirphy.Scenario">covsirphy.Scenario</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.complement">
<code class="sig-name descname"><span class="pre">complement</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.complement"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Complement the number of recovered cases, if necessary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – the other arguments of JHUData.subset_complement()</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.Scenario" title="covsirphy.Scenario">covsirphy.Scenario</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.complement_reverse">
<code class="sig-name descname"><span class="pre">complement_reverse</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.complement_reverse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.complement_reverse" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore the raw records. Reverse method of covsirphy.Scenario.complement().</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>self</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="covsirphy.html#covsirphy.Scenario" title="covsirphy.Scenario">covsirphy.Scenario</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.delete">
<code class="sig-name descname"><span class="pre">delete</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phase</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – phase names, or [‘last’]</p></li>
<li><p><strong>name</strong> (<em>str</em>) – name of phase series</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.Scenario" title="covsirphy.Scenario">covsirphy.Scenario</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If &#64;phases is None, the phase series will be deleted.
When &#64;phase is ‘0th’, disable 0th phase. 0th phase will not be deleted.
If the last phase is included in &#64;phases, the dates will be released from phases.
If the last phase is not included, the dates will be assigned to the previous phase.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.describe">
<code class="sig-name descname"><span class="pre">describe</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y0_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_rt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.describe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Describe representative values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>y0_dict</strong> (<em>dict</em><em> or </em><em>None</em>) – dictionary of initial values or None
- key (str): variable name
- value (float): initial value</p></li>
<li><p><strong>with_rt</strong> (<em>bool</em>) – whether show the history of Rt values</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Index</dt><dd><p>str: scenario name</p>
</dd>
<dt>Columns</dt><dd><ul class="simple">
<li><p>max(Infected): max value of Infected</p></li>
<li><p>argmax(Infected): the date when Infected shows max value</p></li>
<li><p>Confirmed({date}): Confirmed on the next date of the last phase</p></li>
<li><p>Infected({date}): Infected on the next date of the last phase</p></li>
<li><p>Fatal({date}): Fatal on the next date of the last phase</p></li>
<li><p>nth_Rt etc.: Rt value if the values are not the same values</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.disable">
<code class="sig-name descname"><span class="pre">disable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phases</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.disable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.disable" title="Permalink to this definition">¶</a></dt>
<dd><p>The phases will be disabled and removed from summary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phase</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – phase names or None (all enabled phases)</p></li>
<li><p><strong>name</strong> (<em>str</em>) – scenario name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.Scenario" title="covsirphy.Scenario">covsirphy.Scenario</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.enable">
<code class="sig-name descname"><span class="pre">enable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phases</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.enable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.enable" title="Permalink to this definition">¶</a></dt>
<dd><p>The phases will be enabled and appear in summary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phase</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – phase names or None (all disabled phases)</p></li>
<li><p><strong>name</strong> (<em>str</em>) – scenario name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.Scenario" title="covsirphy.Scenario">covsirphy.Scenario</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.estimate">
<code class="sig-name descname"><span class="pre">estimate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.estimate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.estimate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform parameter estimation for each phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.ModelBase" title="covsirphy.ModelBase"><em>covsirphy.ModelBase</em></a>) – ODE model</p></li>
<li><p><strong>phases</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – list of phase names, like 1st, 2nd…</p></li>
<li><p><strong>name</strong> (<em>str</em>) – phase series name</p></li>
<li><p><strong>n_jobs</strong> (<em>int</em>) – the number of parallel jobs or -1 (CPU count)</p></li>
<li><p><strong>kwargs</strong> – keyword arguments of model parameters and covsirphy.Estimator.run()</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If ‘Main’ was used as &#64;name, main PhaseSeries will be used.</p></li>
<li><p>If &#64;name phase was not registered, new PhaseSeries will be created.</p></li>
<li><p>If &#64;phases is None, all past phase will be used.</p></li>
<li><p>Phases with estimated parameter values will be ignored.</p></li>
<li><p>In kwargs, tau value cannot be included.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.estimate_accuracy">
<code class="sig-name descname"><span class="pre">estimate_accuracy</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.estimate_accuracy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.estimate_accuracy" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the accuracy as a figure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phase</strong> (<em>str</em>) – phase name, like 1st, 2nd…</p></li>
<li><p><strong>name</strong> (<em>str</em>) – phase series name</p></li>
<li><p><strong>kwargs</strong> – keyword arguments of covsirphy.Estimator.accuracy()</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If ‘Main’ was used as &#64;name, main PhaseSeries will be used.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.estimate_delay">
<code class="sig-name descname"><span class="pre">estimate_delay</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oxcgrt_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indicator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Stringency_index'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Confirmed'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(7,</span> <span class="pre">None)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.estimate_delay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.estimate_delay" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate the average day [days] between the indicator and the target.
We assume that the indicator impact on the target value with delay.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>oxcgrt_data</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.OxCGRTData" title="covsirphy.OxCGRTData"><em>covsirphy.OxCGRTData</em></a>) – OxCGRT dataset</p></li>
<li><p><strong>indicator</strong> (<em>str</em>) – indicator name, a column of any registered datasets</p></li>
<li><p><strong>target</strong> (<em>str</em>) – target name, a column of any registered datasets</p></li>
<li><p><strong>value_range</strong> (<em>tuple</em><em>(</em><em>int</em><em>, </em><em>int</em><em> or </em><em>None</em><em>)</em>) – tuple, giving the minimum and maximum range to search for change over time</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredMainError" title="covsirphy.NotRegisteredMainError"><strong>NotRegisteredMainError</strong></a> – either JHUData or PopulationData was not registered</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.SubsetNotFoundError" title="covsirphy.SubsetNotFoundError"><strong>SubsetNotFoundError</strong></a> – failed in subsetting because of lack of data</p></li>
<li><p><strong>UserWarning</strong> – failed in calculating and returned the default value (recovery period)</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>int: the estimated number of days of delay [day]</p></li>
<li><dl class="simple">
<dt>pandas.DataFrame:</dt><dd><dl class="simple">
<dt>Index</dt><dd><p>reset index</p>
</dd>
<dt>Columns</dt><dd><ul>
<li><p>(int or float): column defined by &#64;indicator</p></li>
<li><p>(int or float): column defined by &#64;target</p></li>
<li><p>(int): column defined by &#64;delay_name [days]</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple(int, pandas.DataFrame)</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Average recovered period of JHU dataset will be used as returned value when the estimated value was not in value_range.</p></li>
<li><p>Very long periods (outside of 99% quantile) are taken out.</p></li>
<li><p>&#64;oxcgrt_data argument was deprecated. Please use Scenario.register(extras=[oxcgrt_data]).</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.estimate_history">
<code class="sig-name descname"><span class="pre">estimate_history</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.estimate_history"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.estimate_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the history of optimization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phase</strong> (<em>str</em>) – phase name, like 1st, 2nd…</p></li>
<li><p><strong>name</strong> (<em>str</em>) – phase series name</p></li>
<li><p><strong>kwargs</strong> – keyword arguments of covsirphy.Estimator.history()</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If ‘Main’ was used as &#64;name, main PhaseSeries will be used.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.first_date">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">first_date</span></code><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.first_date" title="Permalink to this definition">¶</a></dt>
<dd><p>the first date of the records</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.fit">
<code class="sig-name descname"><span class="pre">fit</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oxcgrt_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Learn the relationship of ODE parameter values and delayed OxCGRT scores using Elastic Net regression,
assuming that OxCGRT scores will impact on ODE parameter values with delay.
Min-max scaling and Elastic net regression with parameter optimization and cross validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>oxcgrt_data</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.OxCGRTData" title="covsirphy.OxCGRTData"><em>covsirphy.OxCGRTData</em></a>) – OxCGRT dataset</p></li>
<li><p><strong>name</strong> (<em>str</em>) – scenario name</p></li>
<li><p><strong>test_size</strong> (<em>float</em>) – proportion of the test dataset of Elastic Net regression</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – random seed when spliting the dataset to train/test data</p></li>
<li><p><strong>delay</strong> (<em>int</em>) – number of days of delay between policy measure and effect</p></li>
<li><p><strong>number of confirmed cases.</strong> (<em>on</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="covsirphy.html#covsirphy.UnExecutedError" title="covsirphy.UnExecutedError"><strong>covsirphy.UnExecutedError</strong></a> – Scenario.estimate() or Scenario.add() were not performed</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>scaler (object): scaler class</p></li>
<li><p>regressor (object): regressor class</p></li>
<li><p>alpha (float): alpha value used in Elastic Net regression</p></li>
<li><p>l1_ratio (float): l1_ratio value used in Elastic Net regression</p></li>
<li><p>score_train (float): determination coefficient of train dataset</p></li>
<li><p>score_test (float): determination coefficient of test dataset</p></li>
<li><p>X_train (numpy.array): X_train</p></li>
<li><p>y_train (numpy.array): y_train</p></li>
<li><p>X_test (numpy.array): X_test</p></li>
<li><p>y_test (numpy.array): y_test</p></li>
<li><p>X_target (numpy.array): X_target</p></li>
<li><p>intercept (pandas.DataFrame): intercept and coefficients (Index ODE parameters, Columns indicators)</p></li>
<li><p>coef (pandas.DataFrame): intercept and coefficients (Index ODE parameters, Columns indicators)</p></li>
<li><p>delay (int): number of days of delay between policy measure and effect
on number of confirmed cases.</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict(str, object)</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>&#64;oxcgrt_data argument was deprecated. Please use Scenario.register(extras=[oxcgrt_data]).</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.fit_predict">
<code class="sig-name descname"><span class="pre">fit_predict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oxcgrt_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.fit_predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.fit_predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict parameter values of the future phases using Elastic Net regression with OxCGRT scores,
assuming that OxCGRT scores will impact on ODE parameter values with delay.
New future phases will be added (over-written).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>oxcgrt_data</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.OxCGRTData" title="covsirphy.OxCGRTData"><em>covsirphy.OxCGRTData</em></a><em> or </em><em>None</em>) – OxCGRT dataset</p></li>
<li><p><strong>name</strong> (<em>str</em>) – scenario name</p></li>
<li><p><strong>kwargs</strong> – the other arguments of Scenario.fit()</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.UnExecutedError" title="covsirphy.UnExecutedError"><strong>covsirphy.UnExecutedError</strong></a> – Scenario.estimate() or Scenario.add() were not performed</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredExtraError" title="covsirphy.NotRegisteredExtraError"><strong>NotRegisteredExtraError</strong></a> – no extra datasets were registered</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>self</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="covsirphy.html#covsirphy.Scenario" title="covsirphy.Scenario">covsirphy.Scenario</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>&#64;oxcgrt_data argument was deprecated. Please use Scenario.register(extras=[oxcgrt_data]).</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.get">
<code class="sig-name descname"><span class="pre">get</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phase</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'last'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the parameter value of the phase.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>param</strong> (<em>str</em>) – parameter name (columns in self.summary())</p></li>
<li><p><strong>phase</strong> (<em>str</em>) – phase name or ‘last’
- if ‘last’, the value of the last phase will be returned</p></li>
<li><p><strong>name</strong> (<em>str</em>) – phase series name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str or int or float</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If ‘Main’ was used as &#64;name, main PhaseSeries will be used.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.history">
<code class="sig-name descname"><span class="pre">history</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_actual</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y0_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.history"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.history" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the history of variables and parameter values to compare scenarios.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>str</em>) – parameter or variable name to show (Rt, Infected etc.)</p></li>
<li><p><strong>phases</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – phases to shoe or None (all phases)</p></li>
<li><p><strong>with_actual</strong> (<em>bool</em>) – if True and &#64;target is a variable name, show actual number of cases</p></li>
<li><p><strong>y0_dict</strong> (<em>dict</em><em> or </em><em>None</em>) – dictionary of initial values or None
- key (str): variable name
- value (float): initial value</p></li>
<li><p><strong>kwargs</strong> – the other keyword arguments of Scenario.line_plot()</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.history_rate">
<code class="sig-name descname"><span class="pre">history_rate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.history_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.history_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Show change rates of parameter values in one figure.
We can find the parameters which increased/decreased significantly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – parameters to show</p></li>
<li><p><strong>name</strong> (<em>str</em>) – phase series name</p></li>
<li><p><strong>kwargs</strong> – the other keyword arguments of Scenario.line_plot()</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.interactive">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">interactive</span></code><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.interactive" title="Permalink to this definition">¶</a></dt>
<dd><p>interactive mode (display figures) or not</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When running scripts, interactive mode cannot be selected.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.last_date">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">last_date</span></code><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.last_date" title="Permalink to this definition">¶</a></dt>
<dd><p>the last date of the records</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.line_plot">
<code class="sig-name descname"><span class="pre">line_plot</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_figure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.line_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.line_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Display or save a line plot of the dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show_figure</strong> (<em>bool</em>) – whether show figure when interactive mode or not</p></li>
<li><p><strong>filename</strong> (<em>str</em><em> or </em><em>None</em>) – filename of the figure or None (not save) when script mode</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When interactive mode and &#64;show_figure is True, display the figure.
When script mode and filename is not None, save the figure.
When using interactive shell, we can change the modes by Scenario.interactive = True/False.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.param_history">
<code class="sig-name descname"><span class="pre">param_history</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.param_history" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.phase_estimator">
<code class="sig-name descname"><span class="pre">phase_estimator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.phase_estimator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.phase_estimator" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the estimator of the phase.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phase</strong> (<em>str</em>) – phase name, like 1st, 2nd…</p></li>
<li><p><strong>name</strong> (<em>str</em>) – phase series name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>estimator of the phase</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.Estimator" title="covsirphy.Estimator">covsirphy.Estimator</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.predict">
<code class="sig-name descname"><span class="pre">predict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict parameter values of the future phases using Elastic Net regression with OxCGRT scores,
assuming that OxCGRT scores will impact on ODE parameter values with delay.
New future phases will be added (over-written).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – scenario name</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.UnExecutedError" title="covsirphy.UnExecutedError"><strong>covsirphy.UnExecutedError</strong></a> – Scenario.fit() was not performed</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredExtraError" title="covsirphy.NotRegisteredExtraError"><strong>NotRegisteredExtraError</strong></a> – no extra datasets were registered</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>self</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="covsirphy.html#covsirphy.Scenario" title="covsirphy.Scenario">covsirphy.Scenario</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.records">
<code class="sig-name descname"><span class="pre">records</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.records"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.records" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the records as a dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variables</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>str</em><em> or </em><em>None</em>) – list of variables, ‘all’, None (Infected/Fatal/Recovered)</p></li>
<li><p><strong>kwargs</strong> – the other keyword arguments of Scenario.line_plot()</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredMainError" title="covsirphy.NotRegisteredMainError"><strong>NotRegisteredMainError</strong></a> – either JHUData or PopulationData was not registered</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.SubsetNotFoundError" title="covsirphy.SubsetNotFoundError"><strong>SubsetNotFoundError</strong></a> – failed in subsetting because of lack of data</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredExtraError" title="covsirphy.NotRegisteredExtraError"><strong>NotRegisteredExtraError</strong></a> – some variables are not included in the main datasets</p></li>
<li><p><strong>and no extra datasets were registered</strong> – </p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>pandas.DataFrame</p>
<blockquote>
<div><dl class="simple">
<dt>Index</dt><dd><p>reset index</p>
</dd>
<dt>Columns</dt><dd><ul class="simple">
<li><p>Date (pd.TimeStamp): Observation date</p></li>
<li><p>Columns set by &#64;variables (int)</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Records with Recovered &gt; 0 will be selected.</p></li>
<li><p>If complement was performed by Scenario.complement() or Scenario(auto_complement=True),</p></li>
</ul>
<p>The kind of complement will be added to the title of the figure.
- &#64;variables can be selected from Susceptible/Confirmed/Infected/Fatal/Recovered.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.records_diff">
<code class="sig-name descname"><span class="pre">records_diff</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">7</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.records_diff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.records_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of daily new cases (the first discreate difference of records).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variables</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>str</em><em> or </em><em>None</em>) – list of variables, ‘all’, None (Infected/Fatal/Recovered)</p></li>
<li><p><strong>window</strong> (<em>int</em>) – window of moving average, &gt;= 1</p></li>
<li><p><strong>kwargs</strong> – the other keyword arguments of Scenario.line_plot()</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>pandas.DataFrame</dt><dd><dl class="simple">
<dt>Index</dt><dd><ul class="simple">
<li><p>Date (pd.TimeStamp): Observation date</p></li>
</ul>
</dd>
<dt>Columns</dt><dd><ul class="simple">
<li><p>Confirmed (int): daily new cases of Confirmed, if calculated</p></li>
<li><p>Infected (int):  daily new cases of Infected, if calculated</p></li>
<li><p>Fatal (int):  daily new cases of Fatal, if calculated</p></li>
<li><p>Recovered (int):  daily new cases of Recovered, if calculated</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>&#64;variables will be selected from Confirmed, Infected, Fatal and Recovered.
If None was set as &#64;variables, [“Confirmed”, “Fatal”, “Recovered”] will be used.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.register">
<code class="sig-name descname"><span class="pre">register</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jhu_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">population_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extras</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.register"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jhu_data</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.JHUData" title="covsirphy.JHUData"><em>covsirphy.JHUData</em></a><em> or </em><em>None</em>) – object of records</p></li>
<li><p><strong>population_data</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.PopulationData" title="covsirphy.PopulationData"><em>covsirphy.PopulationData</em></a><em> or </em><em>None</em>) – PopulationData object</p></li>
<li><p><strong>extras</strong> (<em>list</em><em>[</em><a class="reference internal" href="covsirphy.html#covsirphy.CleaningBase" title="covsirphy.CleaningBase"><em>covsirphy.CleaningBase</em></a><em>] or </em><em>None</em>) – extra datasets</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – non-data cleaning instance was included</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.UnExpectedValueError" title="covsirphy.UnExpectedValueError"><strong>UnExpectedValueError</strong></a> – instance of un-expected data cleaning class was included as an extra dataset</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.retrospective">
<code class="sig-name descname"><span class="pre">retrospective</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beginning_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">control</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Target'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.retrospective"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.retrospective" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform retrospective analysis.
Compare the actual series of phases (control) and
series of phases with specified parameters (target).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>beginning_date</strong> (<em>str</em>) – when the parameter values start to be changed from actual values</p></li>
<li><p><strong>model</strong> (<a class="reference internal" href="covsirphy.html#covsirphy.ModelBase" title="covsirphy.ModelBase"><em>covsirphy.ModelBase</em></a>) – ODE model</p></li>
<li><p><strong>control</strong> (<em>str</em>) – scenario name of control</p></li>
<li><p><strong>target</strong> (<em>str</em>) – scenario name of target</p></li>
<li><p><strong>kwargs</strong> – keyword argument of parameter values and Estimator.run()</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When parameter values are not specified,
actual values of the last date before the beginning date will be used.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.score">
<code class="sig-name descname"><span class="pre">score</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metrics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'RMSLE'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">past_days</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y0_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.score"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.score" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate accuracy of phase setting and parameter estimation of all enabled phases all some past days.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>metrics</strong> (<em>str</em>) – “MAE”, “MSE”, “MSLE”, “RMSE” or “RMSLE”</p></li>
<li><p><strong>variables</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – variables to use in calculation</p></li>
<li><p><strong>phases</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – phases to use in calculation</p></li>
<li><p><strong>past_days</strong> (<em>int</em><em> or </em><em>None</em>) – how many past days to use in calculation, natural integer</p></li>
<li><p><strong>name</strong> (<em>str</em>) – phase series name. If ‘Main’, main PhaseSeries will be used</p></li>
<li><p><strong>y0_dict</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>float</em><em>] or </em><em>None</em>) – dictionary of initial values of variables</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>score with the specified metrics</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If &#64;variables is None, [“Infected”, “Fatal”, “Recovered”] will be used.
“Confirmed”, “Infected”, “Fatal” and “Recovered” can be used in &#64;variables.
If &#64;phases is None, all phases will be used.
&#64;phases and &#64;past_days can not be specified at the same time.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.separate">
<code class="sig-name descname"><span class="pre">separate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">population</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.separate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.separate" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new phase with the change point.
New phase name will be automatically determined.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> (<em>str</em>) – change point, i.e. start date of the new phase</p></li>
<li><p><strong>name</strong> (<em>str</em>) – scenario name</p></li>
<li><p><strong>population</strong> (<em>int</em>) – population value of the change point</p></li>
<li><p><strong>kwargs</strong> – keyword arguments of PhaseUnit.set_ode() if update is necessary</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.Scenario" title="covsirphy.Scenario">covsirphy.Scenario</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.show_complement">
<code class="sig-name descname"><span class="pre">show_complement</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.show_complement"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.show_complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the details of complement that was (or will be) performed for the records.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – keyword arguments of JHUDataComplementHandler() i.e. control factors of complement</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>as the same as JHUData.show_complement()</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.simulate">
<code class="sig-name descname"><span class="pre">simulate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y0_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.simulate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.simulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate ODE models with set/estimated parameter values and show it as a figure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variables</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – variables to include, Infected/Fatal/Recovered when None</p></li>
<li><p><strong>phases</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – phases to shoe or None (all phases)</p></li>
<li><p><strong>name</strong> (<em>str</em>) – phase series name. If ‘Main’, main PhaseSeries will be used</p></li>
<li><p><strong>y0_dict</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>float</em><em>] or </em><em>None</em>) – dictionary of initial values of variables</p></li>
<li><p><strong>kwargs</strong> – the other keyword arguments of Scenario.line_plot()</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>pandas.DataFrame</dt><dd><dl class="simple">
<dt>Index</dt><dd><p>reset index</p>
</dd>
<dt>Columns</dt><dd><ul class="simple">
<li><p>Date (pd.TimeStamp): Observation date</p></li>
<li><p>Country (str): country/region name</p></li>
<li><p>Province (str): province/prefecture/state name</p></li>
<li><p>Variables of the model and dataset (int): Confirmed etc.</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.summary">
<code class="sig-name descname"><span class="pre">summary</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Summarize the series of phases and return a dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – phase series name
- name of alternative phase series registered by Scenario.add()
- if None, all phase series will be shown</p></li>
<li><p><strong>columns</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – columns to show</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>if &#64;name not None, as the same as PhaseSeries().summary()</p></li>
<li><p>if &#64;name is None, index will be phase series name and phase name</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If ‘Main’ was used as &#64;name, main PhaseSeries will be used.
If &#64;columns is None, all columns will be shown.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.timepoints">
<code class="sig-name descname"><span class="pre">timepoints</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">first_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">today</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.timepoints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.timepoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the range of data and reference date to determine past/future of phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>first_date</strong> (<em>str</em><em> or </em><em>None</em>) – the first date of the records or None (min date of main dataset)</p></li>
<li><p><strong>last_date</strong> (<em>str</em><em> or </em><em>None</em>) – the first date of the records or None (max date of main dataset)</p></li>
<li><p><strong>today</strong> (<em>str</em><em> or </em><em>None</em>) – reference date to determine whether a phase is a past phase or a future phase</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.NotRegisteredMainError" title="covsirphy.NotRegisteredMainError"><strong>NotRegisteredMainError</strong></a> – either JHUData or PopulationData was not registered</p></li>
<li><p><a class="reference internal" href="covsirphy.html#covsirphy.SubsetNotFoundError" title="covsirphy.SubsetNotFoundError"><strong>SubsetNotFoundError</strong></a> – failed in subsetting because of lack of data</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When &#64;today is None, the reference date will be the same as &#64;last_date (or max date).</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.today">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">today</span></code><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.today" title="Permalink to this definition">¶</a></dt>
<dd><p>reference date to determine whether a phase is a past phase or a future phase</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.track">
<code class="sig-name descname"><span class="pre">track</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_actual</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y0_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.track"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.track" title="Permalink to this definition">¶</a></dt>
<dd><p>Show values of parameters and variables in one dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phases</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>None</em>) – phases to shoe or None (all phases)</p></li>
<li><p><strong>with_actual</strong> (<em>bool</em>) – if True, show actual number of cases will included as “Actual” scenario</p></li>
<li><p><strong>y0_dict</strong> (<em>dict</em><em> or </em><em>None</em>) – dictionary of initial values or None
- key (str): variable name
- value (float): initial value</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>tracking records</dt><dd><dl class="simple">
<dt>Index</dt><dd><p>reset index</p>
</dd>
<dt>Columns</dt><dd><ul class="simple">
<li><p>Scenario (str)</p></li>
<li><p>Date (pandas.TimeStamp)</p></li>
<li><p>variables (int)</p></li>
<li><p>Population (int)</p></li>
<li><p>Rt (float)</p></li>
<li><p>parameter values (float)</p></li>
<li><p>day parameter values (float)</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="covsirphy.analysis.scenario.Scenario.trend">
<code class="sig-name descname"><span class="pre">trend</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Main'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_figure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/covsirphy/analysis/scenario.html#Scenario.trend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#covsirphy.analysis.scenario.Scenario.trend" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform S-R trend analysis and set phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>force</strong> (<em>bool</em>) – if True, change points will be over-written</p></li>
<li><p><strong>name</strong> (<em>str</em>) – phase series name</p></li>
<li><p><strong>show_figure</strong> (<em>bool</em>) – if True, show the result as a figure</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – filename of the figure, or None (display)</p></li>
<li><p><strong>kwargs</strong> – keyword arguments of covsirphy.ChangeFinder() and covsirphy.trend_plot()</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="covsirphy.html#covsirphy.Scenario" title="covsirphy.Scenario">covsirphy.Scenario</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="covsirphy.cleaning.html" class="btn btn-neutral float-right" title="covsirphy.cleaning package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="covsirphy.html" class="btn btn-neutral float-left" title="covsirphy package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, CovsirPhy Development Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>